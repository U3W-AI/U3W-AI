(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/work/index"],{

/***/ 66:
/*!*****************************************************************************!*\
  !*** D:/AAAi/U3W-AI-main/cube-mini/main.js?{"page":"pages%2Fwork%2Findex"} ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(wx, createPage) {

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 4);
__webpack_require__(/*! uni-pages */ 26);
__webpack_require__(/*! @dcloudio/uni-stat/dist/uni-stat.es.js */ 27);
var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 25));
var _index = _interopRequireDefault(__webpack_require__(/*! ./pages/work/index.vue */ 67));
// @ts-ignore
wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;
createPage(_index.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js */ 1)["default"], __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 2)["createPage"]))

/***/ }),

/***/ 67:
/*!**********************************************************!*\
  !*** D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.vue?vue&type=template&id=51b5538d&scoped=true& */ 68);
/* harmony import */ var _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.vue?vue&type=script&lang=js& */ 70);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.vue?vue&type=style&index=0&id=51b5538d&scoped=true&lang=css& */ 84);
/* harmony import */ var _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 52);

var renderjs





/* normalize component */

var component = Object(_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__["default"])(
  _index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "51b5538d",
  null,
  false,
  _index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

component.options.__file = "pages/work/index.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 68:
/*!*****************************************************************************************************!*\
  !*** D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue?vue&type=template&id=51b5538d&scoped=true& ***!
  \*****************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=51b5538d&scoped=true& */ 69);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_17_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_template_id_51b5538d_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 69:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue?vue&type=template&id=51b5538d&scoped=true& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function () {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  var l2 = _vm.sectionExpanded.aiConfig
    ? _vm.__map(_vm.aiList, function (ai, index) {
        var $orig = _vm.__get_orig(ai)
        var m0 = ai.enabled && _vm.isAiLoginEnabled(ai)
        var m1 = _vm.isAiLoginEnabled(ai)
        var m2 = _vm.isAiLoginEnabled(ai)
        var m3 = !_vm.isAiLoginEnabled(ai) && !_vm.isAiInLoading(ai)
        var m4 = _vm.isAiInLoading(ai)
        var m5 = ai.enabled && _vm.isAiLoginEnabled(ai)
        var m6 = !_vm.isAiLoginEnabled(ai) || _vm.isAiInLoading(ai)
        var m7 =
          ai.name === "腾讯元宝" && ai.models ? _vm.getModelIndex(ai) : null
        var m8 =
          ai.name === "腾讯元宝" && ai.models
            ? !ai.enabled || !_vm.isAiLoginEnabled(ai)
            : null
        var m9 =
          ai.name === "腾讯元宝" && ai.models
            ? _vm.getSelectedModelLabel(ai)
            : null
        var g0 = ai.capabilities.length
        var l0 =
          g0 > 0 && (ai.name === "通义千问" || ai.name === "知乎直答")
            ? _vm.__map(ai.capabilities, function (capability, capIndex) {
                var $orig = _vm.__get_orig(capability)
                var m10 = !ai.enabled || !_vm.isAiLoginEnabled(ai)
                return {
                  $orig: $orig,
                  m10: m10,
                }
              })
            : null
        var l1 =
          g0 > 0 && !(ai.name === "通义千问" || ai.name === "知乎直答")
            ? _vm.__map(ai.capabilities, function (capability, capIndex) {
                var $orig = _vm.__get_orig(capability)
                var g1 = !ai.isSingleSelect
                  ? ai.selectedCapabilities.includes(capability.value)
                  : null
                var m11 = !ai.enabled || !_vm.isAiLoginEnabled(ai)
                return {
                  $orig: $orig,
                  g1: g1,
                  m11: m11,
                }
              })
            : null
        return {
          $orig: $orig,
          m0: m0,
          m1: m1,
          m2: m2,
          m3: m3,
          m4: m4,
          m5: m5,
          m6: m6,
          m7: m7,
          m8: m8,
          m9: m9,
          g0: g0,
          l0: l0,
          l1: l1,
        }
      })
    : null
  var g2 = _vm.sectionExpanded.promptInput ? _vm.promptInput.length : null
  var l4 =
    _vm.taskStarted && _vm.sectionExpanded.taskStatus
      ? _vm.__map(_vm.enabledAIs, function (ai, index) {
          var $orig = _vm.__get_orig(ai)
          var m12 = _vm.getStatusText(ai.status)
          var m13 = _vm.getStatusIconClass(ai.status)
          var m14 = _vm.getStatusEmoji(ai.status)
          var g3 = ai.isExpanded && ai.progressLogs.length > 0
          var l3 = g3
            ? _vm.__map(ai.progressLogs, function (log, logIndex) {
                var $orig = _vm.__get_orig(log)
                var m15 = _vm.formatTime(log.timestamp)
                return {
                  $orig: $orig,
                  m15: m15,
                }
              })
            : null
          return {
            $orig: $orig,
            m12: m12,
            m13: m13,
            m14: m14,
            g3: g3,
            l3: l3,
          }
        })
      : null
  var g4 = _vm.results.length
  var g5 =
    g4 > 0 && _vm.currentResult
      ? _vm.currentResult.aiName.includes("智能排版")
      : null
  var m16 =
    g4 > 0 && _vm.currentResult && !!g5
      ? _vm.getMediaLabelFromResult(_vm.currentResult)
      : null
  var m17 =
    g4 > 0 && _vm.currentResult
      ? _vm.currentResult.shareImgUrl &&
        _vm.isImageFile(_vm.currentResult.shareImgUrl)
      : null
  var m18 =
    g4 > 0 && _vm.currentResult && !m17
      ? _vm.currentResult.shareImgUrl &&
        _vm.isPdfFile(_vm.currentResult.shareImgUrl)
      : null
  var m19 =
    g4 > 0 &&
    _vm.currentResult &&
    !m17 &&
    !m18 &&
    !(_vm.currentResult.aiName === "DeepSeek")
      ? _vm.renderMarkdown(_vm.currentResult.content)
      : null
  var l6 = _vm.historyDrawerVisible
    ? _vm.__map(_vm.groupedHistory, function (group, date) {
        var $orig = _vm.__get_orig(group)
        var l5 = _vm.__map(group, function (item, index) {
          var $orig = _vm.__get_orig(item)
          var m20 = _vm.formatHistoryTime(item.createTime)
          return {
            $orig: $orig,
            m20: m20,
          }
        })
        return {
          $orig: $orig,
          l5: l5,
        }
      })
    : null
  var g6 = _vm.scoreModalVisible ? _vm.scorePromptList.length : null
  var m21 = _vm.scoreModalVisible && g6 > 0 ? _vm.getScorePromptIndex() : null
  var l7 = _vm.scoreModalVisible
    ? _vm.__map(_vm.results, function (result, index) {
        var $orig = _vm.__get_orig(result)
        var g7 = _vm.selectedResults.includes(result.aiName)
        return {
          $orig: $orig,
          g7: g7,
        }
      })
    : null
  var l8 = _vm.tthFlowVisible
    ? _vm.__map(_vm.tthFlowLogs, function (log, index) {
        var $orig = _vm.__get_orig(log)
        var m22 = _vm.formatTime(log.timestamp)
        return {
          $orig: $orig,
          m22: m22,
        }
      })
    : null
  var g8 = _vm.tthFlowVisible ? _vm.tthFlowLogs.length : null
  var g9 = _vm.tthFlowVisible ? _vm.tthFlowImages.length : null
  _vm.$mp.data = Object.assign(
    {},
    {
      $root: {
        l2: l2,
        g2: g2,
        l4: l4,
        g4: g4,
        g5: g5,
        m16: m16,
        m17: m17,
        m18: m18,
        m19: m19,
        l6: l6,
        g6: g6,
        m21: m21,
        l7: l7,
        l8: l8,
        g8: g8,
        g9: g9,
      },
    }
  )
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 70:
/*!***********************************************************************************!*\
  !*** D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--13-1!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */ 71);
/* harmony import */ var _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 71:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--13-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(wx, uni) {

var _interopRequireDefault = __webpack_require__(/*! @babel/runtime/helpers/interopRequireDefault */ 4);
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/regenerator */ 72));
var _slicedToArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ 5));
var _typeof2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/typeof */ 13));
var _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ 74));
var _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime/helpers/defineProperty */ 11));
var _marked = __webpack_require__(/*! marked */ 75);
var _aigc = __webpack_require__(/*! @/api/wechat/aigc */ 77);
var _uuid = __webpack_require__(/*! uuid */ 78);
var _storage = _interopRequireDefault(__webpack_require__(/*! @/utils/storage */ 40));
var _constant = _interopRequireDefault(__webpack_require__(/*! @/utils/constant */ 41));
var _auth = __webpack_require__(/*! @/utils/auth */ 45);
var _corpId = __webpack_require__(/*! @/utils/corpId */ 83);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
var _default = {
  name: 'MiniConsole',
  data: function data() {
    return {
      // 系统信息
      statusBarHeight: 0,
      // 用户信息
      userId: '',
      corpId: '',
      chatId: '',
      expandedHistoryItems: {},
      userInfoReq: {
        userPrompt: '',
        userId: '',
        corpId: '',
        taskId: '',
        roles: '',
        toneChatId: '',
        ybDsChatId: '',
        dbChatId: '',
        tyChatId: '',
        baiduChatId: '',
        zhzdChatId: '',
        isNewChat: true
      },
      jsonRpcReqest: {
        jsonrpc: '2.0',
        id: '',
        method: '',
        params: {}
      },
      // 区域展开状态
      sectionExpanded: {
        aiConfig: true,
        promptInput: true,
        taskStatus: true
      },
      // AI配置（参考PC端完整配置）
      aiList: [{
        name: 'DeepSeek',
        avatar: 'https://u3w.com/chatfile/Deepseek.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }, {
          label: '联网搜索',
          value: 'web_search'
        }],
        selectedCapabilities: ['deep_thinking', 'web_search'],
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: false // 添加单选标记
      }, {
        name: '豆包',
        avatar: 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }],
        selectedCapabilities: ['deep_thinking'],
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: false // 添加单选标记
      }, {
        name: '腾讯元宝',
        avatar: 'https://u3w.com/chatfile/yuanbao.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }, {
          label: '联网搜索',
          value: 'web_search'
        }],
        selectedCapabilities: ['deep_thinking', 'web_search'],
        selectedModel: 'hunyuan',
        // 默认选择混元
        models: [{
          label: '混元',
          value: 'hunyuan'
        }, {
          label: 'DeepSeek',
          value: 'deepseek'
        }],
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: false
      }, {
        name: '通义千问',
        avatar: 'https://u3w.com/chatfile/TongYi.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }, {
          label: '联网搜索',
          value: 'web_search'
        }],
        selectedCapability: '',
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true
      }, {
        name: "秘塔",
        avatar: 'https://www.aitool6.com/wp-content/uploads/2023/06/9557d1-2.jpg',
        capabilities: [{
          label: "极速",
          value: "fast"
        }, {
          label: "极速思考",
          value: "fast_thinking"
        }, {
          label: "长思考",
          value: "long_thinking"
        }],
        selectedCapabilities: "fast",
        enabled: true,
        status: "idle",
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: true // 添加单选标记
      }, {
        name: "知乎直答",
        avatar: 'https://u3w.com/chatfile/ZHZD.png',
        capabilities: [{
          label: "智能思考",
          value: "smart_thinking"
        }, {
          label: "深度思考",
          value: "deep_thinking"
        }, {
          label: "快速回答",
          value: "fast_answer"
        }],
        selectedCapability: "smart_thinking",
        // 改为单选，默认智能思考
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: true // 设为单选模式
      }, {
        name: "百度AI",
        avatar: 'https://u3w.com/chatfile/baiduAI.png',
        capabilities: [{
          label: "深度搜索",
          value: "web_search"
        }],
        selectedCapabilities: [],
        enabled: true,
        status: "idle",
        progressLogs: [],
        isExpanded: true
      }],
      // 输入和任务状态
      promptInput: '',
      taskStarted: false,
      enabledAIs: [],
      // 可视化
      screenshots: [],
      autoPlay: false,
      // 结果
      results: [],
      activeResultIndex: 0,
      // 历史记录
      chatHistory: [],
      // 评分
      selectedResults: [],
      scorePrompt: '请你深度阅读以下几篇公众号文章，从多个维度进行逐项打分，输出评分结果。并在以下各篇文章的基础上博采众长，综合整理一篇更全面的文章。',
      scoreAI: '豆包',
      // 默认选择豆包作为评分AI
      scorePromptList: [],
      // 评分提示词模板列表
      selectedScorePrompt: '',
      // 选中的评分提示词模板名称

      // 收录计数器
      collectNum: 0,
      // 媒体投递
      layoutPrompt: '',
      layoutAI: '豆包',
      // 默认选择豆包作为排版AI
      selectedMedia: 'wechat_layout',
      // 默认选择公众号

      // 微头条相关
      tthArticleEditVisible: false,
      // 微头条文章编辑弹窗
      tthArticleTitle: '',
      // 微头条文章标题
      tthArticleContent: '',
      // 微头条文章内容
      tthFlowVisible: false,
      // 微头条发布流程弹窗
      tthFlowLogs: [],
      // 微头条发布流程日志
      tthFlowImages: [],
      // 微头条发布流程图片
      tthScoreContent: '',
      // 智能评分内容

      // 媒体列表配置
      mediaList: [{
        name: "wechat_layout",
        label: "公众号"
      }, {
        name: "zhihu_layout",
        label: "知乎"
      }, {
        name: "weitoutiao_layout",
        label: "微头条"
      }, {
        name: "baijiahao_layout",
        label: "百家号"
      }],
      // WebSocket
      socketTask: null,
      reconnectTimer: null,
      heartbeatTimer: null,
      reconnectCount: 0,
      maxReconnectCount: 5,
      isConnecting: false,
      isRefreshing: false,
      // 防重复刷新标志
      scrollIntoView: '',
      // 弹窗状态
      historyDrawerVisible: false,
      scoreModalVisible: false,
      layoutModalVisible: false,
      currentLayoutResult: null,
      // 当前要排版的结果

      // AI登录状态
      aiLoginStatus: {
        yuanbao: false,
        doubao: false,
        deepseek: false,
        tongyi: false,
        metaso: false,
        zhzd: false,
        baidu: false
      },
      accounts: {
        yuanbao: '',
        doubao: '',
        deepseek: '',
        tongyi: '',
        metaso: '',
        zhzd: '',
        baidu: ''
      },
      isLoading: {
        yuanbao: true,
        doubao: true,
        deepseek: true,
        tongyi: true,
        metaso: true,
        zhzd: true,
        baidu: true
      }
    };
  },
  computed: {
    canSend: function canSend() {
      var _this = this;
      // 检查是否有输入内容
      var hasInput = this.promptInput.trim().length > 0;

      // 检查是否有可用的AI（既启用又已登录）
      var hasAvailableAI = this.aiList.some(function (ai) {
        return ai.enabled && _this.isAiLoginEnabled(ai);
      });

      // 检查是否正在加载AI状态（如果正在加载，禁用发送按钮）
      var isCheckingStatus = this.isLoading.yuanbao || this.isLoading.doubao || this.isLoading.deepseek || this.isLoading.tongyi || this.isLoading.metaso || this.isLoading.zhzd || this.isLoading.baidu;
      return hasInput && hasAvailableAI && !isCheckingStatus;
    },
    canScore: function canScore() {
      var hasSelected = this.selectedResults.length > 0;
      var hasPrompt = this.scorePrompt.trim().length > 0;
      console.log('canScore - selectedResults:', this.selectedResults);
      console.log('canScore - scorePrompt length:', this.scorePrompt.trim().length);
      console.log('canScore - hasSelected:', hasSelected, 'hasPrompt:', hasPrompt);
      return hasSelected && hasPrompt;
    },
    currentResult: function currentResult() {
      return this.results[this.activeResultIndex] || null;
    },
    groupedHistory: function groupedHistory() {
      var _this2 = this;
      var groups = {};
      var chatGroups = {};

      // 首先按chatId分组
      this.chatHistory.forEach(function (item) {
        if (!chatGroups[item.chatId]) {
          chatGroups[item.chatId] = [];
        }
        chatGroups[item.chatId].push(item);
      });

      // 然后按日期分组，并处理父子关系
      Object.values(chatGroups).forEach(function (chatGroup) {
        // 按时间排序
        chatGroup.sort(function (a, b) {
          return new Date(a.createTime) - new Date(b.createTime);
        });

        // 获取最早的记录作为父级
        var parentItem = chatGroup[0];
        var date = _this2.getHistoryDate(parentItem.createTime);
        if (!groups[date]) {
          groups[date] = [];
        }

        // 添加父级记录
        groups[date].push(_objectSpread(_objectSpread({}, parentItem), {}, {
          isParent: true,
          isExpanded: _this2.expandedHistoryItems[parentItem.chatId] || false,
          children: chatGroup.slice(1).map(function (child) {
            return _objectSpread(_objectSpread({}, child), {}, {
              isParent: false
            });
          })
        }));
      });
      return groups;
    },
    // 微头条文章内容字符数
    tthArticleContentLength: function tthArticleContentLength() {
      return this.tthArticleContent ? this.tthArticleContent.length : 0;
    },
    // 检查微头条文章内容是否超过2000字
    isTthArticleContentExceeded: function isTthArticleContentExceeded() {
      return this.tthArticleContentLength > 2000;
    }
  },
  watch: {
    // 监听微头条文章内容变化，确保textarea正确显示
    tthArticleContent: {
      handler: function handler(newVal, oldVal) {
        var _this3 = this;
        // 当内容变化时，确保textarea正确显示
        this.$nextTick(function () {
          var textarea = _this3.$el.querySelector('.score-textarea');
          if (textarea && textarea.value !== newVal) {
            textarea.value = newVal;
          }
        });
      },
      immediate: false
    }
  },
  onLoad: function onLoad() {
    var _this4 = this;
    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {
      var windowInfo;
      return _regenerator.default.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              // 获取状态栏高度（小程序环境）
              windowInfo = wx.getWindowInfo();
              _this4.statusBarHeight = windowInfo.statusBarHeight || 0;
              _context.next = 4;
              return _this4.initUserInfo();
            case 4:
              // 监听企业ID更新事件
              uni.$on('corpIdUpdated', _this4.handleCorpIdUpdated);

              // 检查用户信息是否完整
              if (!(!_this4.userId || !_this4.corpId)) {
                _context.next = 9;
                break;
              }
              console.log('用户信息不完整，跳转到登录页面');
              uni.showModal({
                title: '提示',
                content: '请先登录后再使用',
                showCancel: false,
                confirmText: '去登录',
                success: function success() {
                  uni.navigateTo({
                    url: '/pages/login/index'
                  });
                }
              });
              return _context.abrupt("return");
            case 9:
              _this4.initWebSocket();
              _this4.loadChatHistory(0); // 加载历史记录
              _this4.loadLastChat(); // 加载上次会话
              _this4.initEnabledAIs(); // 初始化AI列表
              _this4.checkAiLoginStatus(); // 检查AI登录状态
            case 14:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }))();
  },
  onShow: function onShow() {
    // 页面显示时确保企业ID最新
    this.ensureLatestCorpId();
  },
  onUnload: function onUnload() {
    // 移除事件监听
    uni.$off('corpIdUpdated', this.handleCorpIdUpdated);
    this.closeWebSocket();
  },
  methods: {
    // 从result的aiName中提取媒体标签
    getMediaLabelFromResult: function getMediaLabelFromResult(result) {
      if (!result || !result.aiName) return '公众号';
      // 从 "智能排版公众号" 或 "智能排版知乎" 中提取媒体名称
      var mediaLabel = result.aiName.substring(4); // 去掉"智能排版"
      return mediaLabel || '公众号';
    },
    // 处理textarea获得焦点事件
    handleTextareaFocus: function handleTextareaFocus() {
      var _this5 = this;
      // 确保textarea内容正确显示
      this.$nextTick(function () {
        var textarea = _this5.$el.querySelector('.score-textarea');
        if (textarea && textarea.value !== _this5.tthArticleContent) {
          textarea.value = _this5.tthArticleContent;
          // 触发input事件确保v-model同步
          textarea.dispatchEvent(new Event('input', {
            bubbles: true
          }));
        }
      });
    },
    // 初始化用户信息
    initUserInfo: function initUserInfo() {
      var _this6 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {
        return _regenerator.default.wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                // 从store获取用户信息，兼容缓存方式
                _this6.userId = _storage.default.get(_constant.default.userId);
                // 使用企业ID工具获取最新企业ID
                _context2.prev = 1;
                _context2.next = 4;
                return (0, _corpId.getCorpId)();
              case 4:
                _this6.corpId = _context2.sent;
                _context2.next = 11;
                break;
              case 7:
                _context2.prev = 7;
                _context2.t0 = _context2["catch"](1);
                console.warn('获取企业ID失败，使用缓存值:', _context2.t0);
                _this6.corpId = _storage.default.get(_constant.default.corpId);
              case 11:
                _this6.chatId = _this6.generateUUID();

                // 初始化请求参数
                _this6.userInfoReq.userId = _this6.userId;
                _this6.userInfoReq.corpId = _this6.corpId;
                console.log('初始化用户信息:', {
                  userId: _this6.userId,
                  corpId: _this6.corpId
                });
              case 15:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, null, [[1, 7]]);
      }))();
    },
    // 初始化启用的AI列表
    initEnabledAIs: function initEnabledAIs() {
      // 初始化时显示所有AI，不过滤登录状态
      this.enabledAIs = this.aiList.filter(function (ai) {
        return ai.enabled;
      });
      console.log('初始化AI列表:', this.enabledAIs.map(function (ai) {
        return ai.name;
      }));
    },
    // 确保企业ID最新
    ensureLatestCorpId: function ensureLatestCorpId() {
      var _this7 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {
        var result;
        return _regenerator.default.wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;
                _context3.next = 3;
                return (0, _corpId.ensureCorpIdOnShow)();
              case 3:
                result = _context3.sent;
                if (result.corpId !== _this7.corpId) {
                  console.log('企业ID已更新:', result.corpId);
                  _this7.corpId = result.corpId;
                  _this7.userInfoReq.corpId = _this7.corpId;
                }
                _context3.next = 10;
                break;
              case 7:
                _context3.prev = 7;
                _context3.t0 = _context3["catch"](0);
                console.error('确保企业ID最新失败:', _context3.t0);
              case 10:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, null, [[0, 7]]);
      }))();
    },
    // 处理企业ID更新事件
    handleCorpIdUpdated: function handleCorpIdUpdated(data) {
      var newCorpId = data.corpId;
      if (newCorpId && newCorpId !== this.corpId) {
        console.log('小程序接收到企业ID更新事件，更新本地corpId:', newCorpId);
        this.corpId = newCorpId;
        this.userInfoReq.corpId = newCorpId;
        uni.showToast({
          title: "\u4E3B\u673AID\u5DF2\u81EA\u52A8\u66F4\u65B0: ".concat(newCorpId),
          icon: 'success'
        });
      }
    },
    // 生成UUID
    generateUUID: function generateUUID() {
      return (0, _uuid.v4)();
    },
    // 切换区域展开状态
    toggleSection: function toggleSection(section) {
      this.sectionExpanded[section] = !this.sectionExpanded[section];
    },
    // 切换AI启用状态
    toggleAI: function toggleAI(ai, event) {
      // 检查AI是否已登录
      if (!this.isAiLoginEnabled(ai)) {
        uni.showModal({
          title: '提示',
          content: "".concat(ai.name, "\u9700\u8981\u5148\u767B\u5F55\uFF0C\u8BF7\u524D\u5F80PC\u7AEF\u8FDB\u884C\u767B\u5F55\u540E\u518D\u4F7F\u7528"),
          showCancel: false,
          confirmText: '知道了'
        });
        return;
      }
      ai.enabled = event.detail.value;
    },
    // 腾讯元宝模型选择相关方法
    getModelIndex: function getModelIndex(ai) {
      if (!ai.models || !ai.selectedModel) return 0;
      return ai.models.findIndex(function (model) {
        return model.value === ai.selectedModel;
      });
    },
    getSelectedModelLabel: function getSelectedModelLabel(ai) {
      if (!ai.models || !ai.selectedModel) return '请选择模型';
      var model = ai.models.find(function (model) {
        return model.value === ai.selectedModel;
      });
      return model ? model.label : '请选择模型';
    },
    onModelChange: function onModelChange(ai, event) {
      if (!ai.enabled || !this.isAiLoginEnabled(ai)) return;
      var index = event.detail.value;
      if (ai.models && ai.models[index]) {
        ai.selectedModel = ai.models[index].value;
        uni.showToast({
          title: "\u5DF2\u5207\u6362\u5230".concat(ai.models[index].label),
          icon: 'success',
          duration: 1500
        });
      }
    },
    // 切换AI能力
    toggleCapability: function toggleCapability(ai, capabilityValue) {
      // 检查AI是否已登录和启用
      if (!this.isAiLoginEnabled(ai)) {
        uni.showModal({
          title: '提示',
          content: "".concat(ai.name, "\u9700\u8981\u5148\u767B\u5F55\uFF0C\u8BF7\u524D\u5F80PC\u7AEF\u8FDB\u884C\u767B\u5F55\u540E\u518D\u4F7F\u7528"),
          showCancel: false,
          confirmText: '知道了'
        });
        return;
      }
      if (!ai.enabled) return;

      // 单选逻辑（针对秘塔AI）
      if (ai.isSingleSelect) {
        // 直接设置为当前选中值，实现单选效果
        ai.selectedCapabilities = capabilityValue;
      }
      // 其他AI保持多选逻辑
      else {
        var index = ai.selectedCapabilities.indexOf(capabilityValue);
        if (index === -1) {
          ai.selectedCapabilities.push(capabilityValue);
        } else {
          ai.selectedCapabilities.splice(index, 1);
        }
      }
    },
    // 通义千问切换能力
    selectSingleCapability: function selectSingleCapability(ai, capabilityValue) {
      if (!ai.enabled || !this.isAiLoginEnabled(ai)) return;
      if (ai.selectedCapability === capabilityValue) {
        ai.selectedCapability = '';
      } else {
        ai.selectedCapability = capabilityValue;
      }
    },
    // 发送提示词
    sendPrompt: function sendPrompt() {
      var _this8 = this;
      console.log('🚀 [sendPrompt] ========== 开始发送任务 ==========');
      console.log('🚀 [sendPrompt] canSend状态:', this.canSend);
      if (!this.canSend) {
        console.warn('⚠️ [sendPrompt] canSend为false，停止发送');
        return;
      }
      console.log('📝 [sendPrompt] 用户输入提示词:', this.promptInput);
      console.log('👤 [sendPrompt] 用户ID:', this.userId);
      console.log('🏢 [sendPrompt] 企业ID:', this.corpId);
      this.screenshots = [];
      // 折叠所有区域
      this.sectionExpanded.aiConfig = false;
      this.sectionExpanded.promptInput = false;
      // this.sectionExpanded.taskStatus = false;

      this.taskStarted = true;
      this.results = []; // 清空之前的结果
      console.log('🗑️ [sendPrompt] 清空之前的结果和截图');
      this.userInfoReq.roles = '';
      this.userInfoReq.taskId = this.generateUUID();
      this.userInfoReq.userId = this.userId;
      this.userInfoReq.corpId = this.corpId;
      this.userInfoReq.userPrompt = this.promptInput;
      console.log('🎫 [sendPrompt] 生成任务ID:', this.userInfoReq.taskId);

      // 获取启用的AI列表及其状态
      this.enabledAIs = this.aiList.filter(function (ai) {
        return ai.enabled && _this8.isAiLoginEnabled(ai);
      });
      console.log('🤖 [sendPrompt] 筛选启用的AI数量:', this.enabledAIs.length);
      console.log('🤖 [sendPrompt] 启用的AI列表:', this.enabledAIs.map(function (ai) {
        return ai.name;
      }).join(', '));

      // 将所有启用的AI状态设置为运行中
      this.enabledAIs.forEach(function (ai) {
        ai.status = 'running';
        console.log("\u25B6\uFE0F [sendPrompt] \u8BBE\u7F6E".concat(ai.name, "\u72B6\u6001\u4E3A: running"));
      });

      // 构建角色参数
      this.enabledAIs.forEach(function (ai) {
        if (ai.name === '腾讯元宝') {
          if (ai.selectedModel === 'hunyuan') {
            // 混元模型
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'yb-hunyuan-pt,';
            if (ai.selectedCapabilities.includes("deep_thinking")) {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'yb-hunyuan-sdsk,';
            }
            if (ai.selectedCapabilities.includes("web_search")) {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'yb-hunyuan-lwss,';
            }
          } else if (ai.selectedModel === 'deepseek') {
            // DeepSeek模型
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'yb-deepseek-pt,';
            if (ai.selectedCapabilities.includes("deep_thinking")) {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'yb-deepseek-sdsk,';
            }
            if (ai.selectedCapabilities.includes("web_search")) {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'yb-deepseek-lwss,';
            }
          }
        }
        if (ai.name === 'DeepSeek') {
          _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'deepseek,';
          if (ai.selectedCapabilities.includes("deep_thinking")) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'ds-sdsk,';
          }
          if (ai.selectedCapabilities.includes("web_search")) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'ds-lwss,';
          }
        }
        if (ai.name === '豆包') {
          _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'zj-db,';
          if (ai.selectedCapabilities.includes("deep_thinking")) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'zj-db-sdsk,';
          }
        }
        if (ai.name === '秘塔') {
          _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'mita,';
          if (ai.selectedCapabilities.includes("fast")) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'metaso-jisu,';
          }
          if (ai.selectedCapabilities.includes("fast_thinking")) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'metaso-jssk,';
          }
          if (ai.selectedCapabilities.includes("long_thinking")) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'metaso-csk,';
          }
        }
        if (ai.name === '通义千问' && ai.enabled) {
          _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'ty-qw,';
          if (ai.selectedCapability === "deep_thinking") {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'ty-qw-sdsk,';
          } else if (ai.selectedCapability === "web_search") {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'ty-qw-lwss,';
          }
        }
        if (ai.name === '百度AI' && ai.enabled) {
          if (_this8.isAiLoginEnabled(ai)) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'baidu-agent,';
            if (ai.selectedCapabilities.includes("web_search")) {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + 'baidu-sdss,';
            }
          }
        }
        if (ai.name === "知乎直答") {
          if (_this8.isAiLoginEnabled(ai)) {
            _this8.userInfoReq.roles = _this8.userInfoReq.roles + "zhzd-chat,";
            // 使用单选思考模式
            if (ai.selectedCapability === "deep_thinking") {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + "zhzd-sdsk,";
            } else if (ai.selectedCapability === "fast_answer") {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + "zhzd-ks,";
            } else if (ai.selectedCapability === "smart_thinking") {
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + "zhzd-zn,";
            } else {
              // 默认智能思考
              _this8.userInfoReq.roles = _this8.userInfoReq.roles + "zhzd-zn,";
            }
          }
        }
      });
      console.log('🎯 [sendPrompt] 最终角色参数roles:', this.userInfoReq.roles);
      console.log('📦 [sendPrompt] 完整请求参数:', JSON.stringify(this.userInfoReq));

      // 滚动到任务状态区域
      this.scrollIntoView = 'task-status';

      //调用后端接口
      this.jsonRpcReqest.id = this.generateUUID();
      this.jsonRpcReqest.method = "使用F8S";
      this.jsonRpcReqest.params = this.userInfoReq;
      console.log('📡 [sendPrompt] 准备发送JSON-RPC请求');
      console.log('📡 [sendPrompt] JSON-RPC请求:', JSON.stringify(this.jsonRpcReqest));
      this.message(this.jsonRpcReqest);
      this.userInfoReq.isNewChat = false;
      console.log('✅ [sendPrompt] 任务已提交到后端');
      console.log('🚀 [sendPrompt] ========== 任务发送完成 ==========');
      uni.showToast({
        title: '任务已提交',
        icon: 'success'
      });
    },
    // WebSocket相关方法
    initWebSocket: function initWebSocket() {
      var _this9 = this;
      // 检查用户信息是否完整
      if (!this.userId || !this.corpId) {
        console.log('用户信息不完整，跳转到登录页面');
        uni.showModal({
          title: '提示',
          content: '请先登录后再使用',
          showCancel: false,
          confirmText: '去登录',
          success: function success() {
            uni.navigateTo({
              url: '/pages/login/index'
            });
          }
        });
        return;
      }
      if (this.isConnecting || this.socketTask) {
        console.log('WebSocket正在连接中或已存在连接，跳过重复连接');
        return;
      }

      // 先清理可能存在的旧连接和定时器
      this.closeWebSocket();
      this.isConnecting = true;

      // 使用PC端的WebSocket连接方式
      var wsUrl = "".concat(Object({"NODE_ENV":"development","VUE_APP_DARK_MODE":"false","VUE_APP_NAME":"U3W-AI","VUE_APP_PLATFORM":"mp-weixin","BASE_URL":"/"}).VUE_APP_WS_API || 'wss://u3w.com/cubeServer/websocket?clientId=', "mypc-").concat(this.userId);
      // const wsUrl = `${process.env.VUE_APP_WS_API || 'ws://127.0.0.1:8081/websocket?clientId='}mypc-${this.userId}`;
      console.log('WebSocket URL:', wsUrl);
      this.socketTask = uni.connectSocket({
        url: wsUrl,
        success: function success() {
          console.log('WebSocket连接成功');
        },
        fail: function fail(err) {
          console.error('WebSocket连接失败', err);
          _this9.isConnecting = false;
          _this9.handleReconnect();
        }
      });
      this.socketTask.onOpen(function () {
        console.log('WebSocket连接已打开');
        _this9.isConnecting = false;
        _this9.reconnectCount = 0; // 重置重连次数

        uni.showToast({
          title: '连接成功',
          icon: 'success',
          duration: 1000
        });

        // 开始心跳检测
        _this9.startHeartbeat();
      });
      this.socketTask.onMessage(function (res) {
        _this9.handleWebSocketMessage(res.data);
      });
      this.socketTask.onError(function (err) {
        console.error('WebSocket连接错误', err);
        _this9.isConnecting = false;
        uni.showToast({
          title: 'WebSocket连接错误',
          icon: 'none'
        });
        _this9.handleReconnect();
      });
      this.socketTask.onClose(function () {
        console.log('WebSocket连接已关闭');
        _this9.isConnecting = false;
        _this9.stopHeartbeat(); // 停止心跳

        uni.showToast({
          title: 'WebSocket连接已关闭',
          icon: 'none'
        });

        // 尝试重连
        _this9.handleReconnect();
      });
    },
    // 处理重连
    handleReconnect: function handleReconnect() {
      var _this10 = this;
      if (this.reconnectCount >= this.maxReconnectCount) {
        console.log('WebSocket重连次数已达上限');
        uni.showModal({
          title: '连接失败',
          content: '网络连接不稳定，请检查网络后手动刷新页面',
          showCancel: false,
          confirmText: '知道了'
        });
        return;
      }

      // 如果已经在连接中，不要重复重连
      if (this.isConnecting) {
        console.log('WebSocket正在连接中，跳过重连');
        return;
      }
      this.reconnectCount++;
      var delay = Math.min(2000 * Math.pow(2, this.reconnectCount), 30000); // 增加基础延迟到2秒

      console.log("WebSocket\u5C06\u5728".concat(delay, "ms\u540E\u8FDB\u884C\u7B2C").concat(this.reconnectCount, "\u6B21\u91CD\u8FDE"));
      this.reconnectTimer = setTimeout(function () {
        console.log("\u5F00\u59CB\u7B2C".concat(_this10.reconnectCount, "\u6B21\u91CD\u8FDE"));
        _this10.initWebSocket();
      }, delay);
    },
    // 开始心跳检测
    startHeartbeat: function startHeartbeat() {
      var _this11 = this;
      this.stopHeartbeat(); // 先停止之前的心跳

      this.heartbeatTimer = setInterval(function () {
        if (_this11.socketTask) {
          _this11.sendWebSocketMessage({
            type: 'HEARTBEAT',
            timestamp: Date.now()
          });
        }
      }, 30000); // 每30秒发送一次心跳
    },
    // 停止心跳检测
    stopHeartbeat: function stopHeartbeat() {
      if (this.heartbeatTimer) {
        clearInterval(this.heartbeatTimer);
        this.heartbeatTimer = null;
      }
    },
    sendWebSocketMessage: function sendWebSocketMessage(data) {
      if (this.socketTask) {
        console.log('发送WebSocket消息:', data);
        this.socketTask.send({
          data: JSON.stringify(data)
        });
      } else {
        console.warn('WebSocket未连接，无法发送消息');
      }
    },
    // 调用后端message接口
    message: function message(data) {
      console.log('📞 [message] 调用后端API, 方法:', data.method);
      console.log('📞 [message] 请求数据:', JSON.stringify(data));
      (0, _aigc.message)(data).then(function (res) {
        console.log('📞 [message] 收到后端响应, code:', res.code);
        console.log('📞 [message] 响应数据:', JSON.stringify(res));
        if (res.code == 201) {
          console.warn('⚠️ [message] 后端返回错误, messages:', res.messages);
          uni.showToast({
            title: res.messages,
            icon: 'none',
            duration: 1500
          });
        } else if (res.code == 200) {
          console.log('✅ [message] 后端处理成功');
        }
      }).catch(function (error) {
        console.error('❌ [message] 调用后端API失败:', error);
      });
    },
    closeWebSocket: function closeWebSocket() {
      // 清理重连定时器
      if (this.reconnectTimer) {
        clearTimeout(this.reconnectTimer);
        this.reconnectTimer = null;
      }

      // 停止心跳检测
      this.stopHeartbeat();

      // 关闭WebSocket连接
      if (this.socketTask) {
        try {
          this.socketTask.close({
            code: 1000,
            reason: '手动关闭连接'
          });
        } catch (e) {
          console.log('关闭WebSocket连接时出错:', e);
        }
        this.socketTask = null;
      }

      // 重置状态
      this.isConnecting = false;
      this.reconnectCount = 0;
      this.isRefreshing = false; // 重置刷新标志
    },
    // 处理WebSocket消息
    handleWebSocketMessage: function handleWebSocketMessage(data) {
      var _this12 = this;
      try {
        var datastr = data;
        console.log('📨 [WebSocket] 收到原始消息, 长度:', datastr.length, '字符');
        console.log('📨 [WebSocket] 消息前200字符:', datastr.substring(0, 200));
        var dataObj = JSON.parse(datastr);
        console.log('📨 [WebSocket] 收到消息, 类型:', dataObj.type);
        console.log('📨 [WebSocket] aiName:', dataObj.aiName);

        // 忽略心跳响应
        if (dataObj.type === 'HEARTBEAT_RESPONSE' || dataObj.type === 'HEARTBEAT') {
          return;
        }

        // 处理chatId消息
        if (dataObj.type === 'RETURN_YBT1_CHATID' && dataObj.chatId) {
          this.userInfoReq.toneChatId = dataObj.chatId;
        } else if (dataObj.type === 'RETURN_YBDS_CHATID' && dataObj.chatId) {
          this.userInfoReq.ybDsChatId = dataObj.chatId;
        } else if (dataObj.type === 'RETURN_DB_CHATID' && dataObj.chatId) {
          this.userInfoReq.dbChatId = dataObj.chatId;
        }
        // else if (dataObj.type === 'RETURN_TY_CHATID' && dataObj.chatId) {
        //   this.userInfoReq.tyChatId = dataObj.chatId;
        // }
        else if (dataObj.type === "RETURN_METASO_CHATID" && dataObj.chatId) {
          this.userInfoReq.metasoChatId = dataObj.chatId;
        }

        // 处理进度日志消息
        if (dataObj.type === 'RETURN_PC_TASK_LOG' && dataObj.aiName) {
          console.log("\uD83D\uDCCB [\u8FDB\u5EA6\u65E5\u5FD7] AI: ".concat(dataObj.aiName, ", \u5185\u5BB9: ").concat(dataObj.content));

          // 只处理当前任务的日志消息
          if (dataObj.taskId && dataObj.taskId !== this.userInfoReq.taskId) {
            console.log("\u26A0\uFE0F [\u8FDB\u5EA6\u65E5\u5FD7] \u5FFD\u7565\u5176\u4ED6\u4EFB\u52A1\u7684\u65E5\u5FD7");
            return;
          }
          var targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === dataObj.aiName;
          });
          if (targetAI && targetAI.status === 'running') {
            console.log("\u2705 [\u8FDB\u5EA6\u65E5\u5FD7] \u627E\u5230\u76EE\u6807AI: ".concat(targetAI.name, ", \u6DFB\u52A0\u8FDB\u5EA6\u65E5\u5FD7"));
            // 检查是否已存在相同内容的日志，避免重复添加
            var existingLog = targetAI.progressLogs.find(function (log) {
              return log.content === dataObj.content;
            });
            if (!existingLog) {
              // 将新进度添加到数组开头
              targetAI.progressLogs.unshift({
                content: dataObj.content,
                timestamp: new Date(),
                isCompleted: false,
                taskId: this.userInfoReq.taskId
              });
              console.log("\uD83D\uDCCA [\u8FDB\u5EA6\u65E5\u5FD7] ".concat(targetAI.name, "\u5F53\u524D\u8FDB\u5EA6\u65E5\u5FD7\u6570\u91CF: ").concat(targetAI.progressLogs.length));
            }
          } else {
            console.warn("\u26A0\uFE0F [\u8FDB\u5EA6\u65E5\u5FD7] \u672A\u627E\u5230AI\u6216AI\u672A\u5728\u8FD0\u884C: ".concat(dataObj.aiName));
          }
          return;
        }

        // 处理截图消息
        if (dataObj.type === 'RETURN_PC_TASK_IMG' && dataObj.url) {
          // 只处理当前任务的截图
          if (dataObj.taskId && dataObj.taskId !== this.userInfoReq.taskId) {
            return;
          }
          // 将新的截图添加到数组开头
          this.screenshots.unshift(dataObj.url);
          return;
        }

        // 处理智能评分结果
        if (dataObj.type === 'RETURN_WKPF_RES') {
          console.log("✅ 收到智能评分结果", dataObj);
          var wkpfAI = this.enabledAIs.find(function (ai) {
            return ai.name === '智能评分';
          });
          if (wkpfAI) {
            wkpfAI.status = 'completed';
            if (wkpfAI.progressLogs.length > 0) {
              wkpfAI.progressLogs[0].isCompleted = true;
            }

            // 添加评分结果到results最前面
            this.results.unshift({
              aiName: '智能评分',
              content: dataObj.draftContent,
              shareUrl: dataObj.shareUrl || '',
              shareImgUrl: dataObj.shareImgUrl || '',
              timestamp: new Date()
            });
            this.activeResultIndex = 0;

            // 折叠所有区域
            this.sectionExpanded.aiConfig = false;
            this.sectionExpanded.promptInput = false;
            this.sectionExpanded.taskStatus = false;

            // 滚动到结果区域
            this.scrollIntoView = 'results';

            // 智能评分完成时，保存历史记录
            this.saveHistory();
            uni.showToast({
              title: '智能评分完成',
              icon: 'success',
              duration: 2000
            });
            console.log('✅ 智能评分结果处理完成');
          }
          return;
        }

        // 处理智能排版结果
        if (dataObj.type === 'RETURN_ZNPB_RES') {
          console.log("收到智能排版结果", dataObj);
          console.log("当前 selectedMedia:", this.selectedMedia);
          var znpbAI = this.enabledAIs.find(function (ai) {
            return ai.name === '智能排版';
          });
          if (znpbAI) {
            znpbAI.status = 'completed';
            if (znpbAI.progressLogs.length > 0) {
              znpbAI.progressLogs[0].isCompleted = true;
            }

            // 根据selectedMedia获取媒体名称标签
            var mediaItem = this.mediaList.find(function (media) {
              return media.name === _this12.selectedMedia;
            });
            var mediaLabel = mediaItem ? mediaItem.label : '';

            // 添加排版结果到结果展示，aiName包含媒体类型
            this.results.unshift({
              aiName: '智能排版' + mediaLabel,
              content: dataObj.draftContent,
              shareUrl: dataObj.shareUrl || '',
              shareImgUrl: dataObj.shareImgUrl || '',
              timestamp: new Date()
            });
            this.activeResultIndex = 0;

            // 折叠所有区域
            this.sectionExpanded.aiConfig = false;
            this.sectionExpanded.promptInput = false;
            this.sectionExpanded.taskStatus = false;

            // 滚动到结果区域
            this.scrollIntoView = 'results';

            // 智能排版完成时，保存历史记录
            this.saveHistory();
            uni.showToast({
              title: "".concat(mediaLabel, "\u6392\u7248\u5B8C\u6210\uFF0C\u53EF\u624B\u52A8\u6295\u9012"),
              icon: 'success'
            });
          }
          return;
        }
        // 处理媒体投递任务日志
        if (dataObj.type === 'RETURN_MEDIA_TASK_LOG') {
          console.log("收到媒体任务日志", dataObj);
          var mediaAI = this.enabledAIs.find(function (ai) {
            return ai.name === '媒体投递';
          });
          if (mediaAI && mediaAI.status === 'running') {
            // 只在运行状态时添加日志
            // 检查是否已存在相同内容的日志，避免重复添加
            var _existingLog = mediaAI.progressLogs.find(function (log) {
              return log.content === dataObj.content;
            });
            if (!_existingLog) {
              // 将新进度添加到数组开头
              mediaAI.progressLogs.unshift({
                content: dataObj.content,
                timestamp: new Date(),
                isCompleted: false,
                type: '媒体投递'
              });

              // 强制更新UI
              this.$forceUpdate();
            }
          }
          return;
        }

        // 处理媒体投递结果（包括知乎、百家号等）
        if (dataObj.type.includes('DELIVERY_RES')) {
          console.log("收到媒体投递完成结果", dataObj);
          var _mediaAI = this.enabledAIs.find(function (ai) {
            return ai.name === '媒体投递';
          });
          if (_mediaAI) {
            _mediaAI.status = 'completed';
            if (_mediaAI.progressLogs.length > 0) {
              _mediaAI.progressLogs[0].isCompleted = true;
            }
          }
          uni.showToast({
            title: dataObj.message || '媒体投递完成',
            icon: 'success'
          });
          return;
        }

        // 处理微头条排版结果
        if (dataObj.type === 'RETURN_TTH_ZNPB_RES') {
          // 设置微头条排版AI节点状态为completed
          var tthZnpbAI = this.enabledAIs.find(function (ai) {
            return ai.name === '微头条排版';
          });
          if (tthZnpbAI) {
            tthZnpbAI.status = 'completed';
            if (tthZnpbAI.progressLogs.length > 0) {
              tthZnpbAI.progressLogs[0].isCompleted = true;
            }
          }
          this.tthArticleTitle = dataObj.title || '';
          this.tthArticleContent = dataObj.content || '';
          this.tthArticleEditVisible = true;

          // 确保textarea正确显示内容
          this.$nextTick(function () {
            // 强制更新textarea内容
            var textarea = _this12.$el.querySelector('.score-textarea');
            if (textarea) {
              textarea.value = _this12.tthArticleContent;
              // 触发input事件确保v-model同步
              textarea.dispatchEvent(new Event('input', {
                bubbles: true
              }));
            }
          });
          if (this.saveHistory) {
            this.saveHistory();
          }
          uni.showToast({
            title: '微头条排版完成，请确认标题和内容',
            icon: 'success'
          });
          return;
        }

        // 处理微头条发布流程
        if (dataObj.type === 'RETURN_TTH_FLOW') {
          if (dataObj.content) {
            this.tthFlowLogs.push({
              content: dataObj.content,
              timestamp: new Date(),
              type: 'flow'
            });
          }
          if (dataObj.shareImgUrl) {
            this.tthFlowImages.push(dataObj.shareImgUrl);
          }
          if (!this.tthFlowVisible) {
            this.tthFlowVisible = true;
          }
          if (dataObj.content === 'success') {
            uni.showToast({
              title: '发布到微头条成功！',
              icon: 'success'
            });
            this.tthFlowVisible = true;
          }
          if (dataObj.content === 'fail') {
            uni.showToast({
              title: '发布到微头条失败！',
              icon: 'none'
            });
            this.tthFlowVisible = false;
            this.tthArticleEditVisible = true;
          }
          return;
        }

        // 处理AI登录状态消息
        console.log('🔐 [状态检查] 检查AI登录状态消息');
        this.handleAiStatusMessage(datastr, dataObj);

        // 处理AI结果
        console.log('🎯 [结果处理] 调用handleAIResult处理AI结果');
        this.handleAIResult(dataObj);
      } catch (error) {
        console.error('❌ WebSocket消息处理错误:', error);
        console.error('❌ 错误堆栈:', error.stack);
        console.error('❌ 消息长度:', data ? data.length : 0);

        // 尝试显示错误提示
        uni.showToast({
          title: '消息处理失败:' + error.message,
          icon: 'none',
          duration: 3000
        });
      }
    },
    handleAiStatusMessage: function handleAiStatusMessage(datastr, dataObj) {
      // 处理腾讯元宝登录状态
      if (datastr.includes("RETURN_YB_STATUS") && dataObj.status != '') {
        this.isLoading.yuanbao = false;
        if (!datastr.includes("false")) {
          this.aiLoginStatus.yuanbao = true;
          this.accounts.yuanbao = dataObj.status;
        } else {
          this.aiLoginStatus.yuanbao = false;
          // 禁用相关AI
          this.disableAIsByLoginStatus('yuanbao');
        }
        // 更新AI启用状态
        this.updateAiEnabledStatus();
      }
      // 处理豆包登录状态
      if (datastr.includes("RETURN_DB_STATUS") && dataObj.status != '') {
        this.isLoading.doubao = false;
        if (!datastr.includes("false")) {
          this.aiLoginStatus.doubao = true;
          this.accounts.doubao = dataObj.status;
        } else {
          this.aiLoginStatus.doubao = false;
          // 禁用相关AI
          this.disableAIsByLoginStatus('doubao');
        }
        // 更新AI启用状态
        this.updateAiEnabledStatus();
      }

      // 处理秘塔登录状态
      else if (datastr.includes("RETURN_METASO_STATUS") && dataObj.status != "") {
        this.isLoading.metaso = false;
        if (!datastr.includes("false")) {
          this.aiLoginStatus.metaso = true;
          this.accounts.metaso = dataObj.status;
        } else {
          this.aiLoginStatus.metaso = false;
          // 禁用相关AI
          this.disableAIsByLoginStatus("metaso");
        }
        // 更新AI启用状态
        this.updateAiEnabledStatus();
      }
      // 处理DeepSeek登录状态
      else if (datastr.includes("RETURN_DEEPSEEK_STATUS")) {
        console.log("收到DeepSeek登录状态消息:", dataObj);
        this.isLoading.deepseek = false;
        if (dataObj.status && dataObj.status !== 'false' && dataObj.status !== '') {
          this.aiLoginStatus.deepseek = true;
          this.accounts.deepseek = dataObj.status;
          console.log("DeepSeek登录成功，账号:", dataObj.status);

          // 查找DeepSeek AI实例
          var deepseekAI = this.aiList.find(function (ai) {
            return ai.name === 'DeepSeek';
          });
        } else {
          this.aiLoginStatus.deepseek = false;
          this.accounts.deepseek = '';
          console.log("DeepSeek未登录");

          // 如果未登录，确保DeepSeek被禁用
          var _deepseekAI = this.aiList.find(function (ai) {
            return ai.name === 'DeepSeek';
          });
        }
        // 强制更新UI
        this.$forceUpdate();
      } else if (datastr.includes("RETURN_TY_STATUS") && dataObj.status != "") {
        this.isLoading.tongyi = false;
        if (!datastr.includes("false")) {
          this.aiLoginStatus.tongyi = true;
          this.accounts.tongyi = dataObj.status;
        } else {
          this.aiLoginStatus.tongyi = false;
          // 禁用相关AI
          this.disableAIsByLoginStatus("tongyi");
        }
        // 更新AI启用状态
        this.updateAiEnabledStatus();
      }

      // 处理知乎直答登录状态
      else if (datastr.includes("RETURN_ZHZD_STATUS") && dataObj.status != "") {
        console.log('收到知乎直答登录状态响应:', datastr, dataObj);
        this.isLoading.zhzd = false;
        if (!datastr.includes("false")) {
          this.aiLoginStatus.zhzd = true;
          this.accounts.zhzd = dataObj.status;
        } else {
          this.aiLoginStatus.zhzd = false;
          // 禁用相关AI
          this.disableAIsByLoginStatus("zhzd");
        }
        // 更新AI启用状态
        this.updateAiEnabledStatus();
      }
      // 处理百度AI登录状态
      else if (datastr.includes("RETURN_BAIDU_STATUS") && dataObj.status != "") {
        this.isLoading.baidu = false;
        if (!datastr.includes("false")) {
          this.aiLoginStatus.baidu = true;
          this.accounts.baidu = dataObj.status;
        } else {
          this.aiLoginStatus.baidu = false;
          // 禁用相关AI
          this.disableAIsByLoginStatus("baidu");
        }
        // 更新AI启用状态
        this.updateAiEnabledStatus();
      }
    },
    handleAIResult: function handleAIResult(dataObj) {
      var _this13 = this;
      console.log('🔍 [handleAIResult] 开始处理AI结果, 消息类型:', dataObj.type);
      console.log('🔍 [handleAIResult] 完整数据对象:', JSON.stringify(dataObj));
      console.log('🔍 [handleAIResult] 当前enabledAIs数量:', this.enabledAIs.length);
      console.log('🔍 [handleAIResult] enabledAIs列表:', this.enabledAIs.map(function (ai) {
        return "".concat(ai.name, "(").concat(ai.status, ")");
      }).join(', '));
      var targetAI = null;

      // 根据消息类型匹配AI
      switch (dataObj.type) {
        case 'RETURN_YBT1_RES':
          console.log('✅ 匹配到腾讯元宝混元消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '腾讯元宝';
          });
          break;
        case 'RETURN_YBDS_RES':
          console.log('✅ 匹配到腾讯元宝DeepSeek消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '腾讯元宝';
          });
          break;
        case 'RETURN_DB_RES':
          console.log('✅ 匹配到豆包消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '豆包';
          });
          break;
        case 'RETURN_DEEPSEEK_RES':
          console.log('✅ 匹配到DeepSeek消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === 'DeepSeek';
          });
          // 如果找不到DeepSeek，可能是因为它不在enabledAIs中（兼容处理）
          if (!targetAI) {
            console.warn('⚠️ DeepSeek不在enabledAIs中，动态添加');
            targetAI = {
              name: 'DeepSeek',
              avatar: 'https://u3w.com/chatfile/Deepseek.png',
              capabilities: [{
                label: '深度思考',
                value: 'deep_thinking'
              }, {
                label: '联网搜索',
                value: 'web_search'
              }],
              selectedCapabilities: ['deep_thinking', 'web_search'],
              enabled: true,
              status: 'running',
              progressLogs: [{
                content: 'DeepSeek响应已接收',
                timestamp: new Date(),
                isCompleted: false
              }],
              isExpanded: true
            };
            this.enabledAIs.unshift(targetAI);
          }
          break;
        case 'RETURN_ZNPB_RES':
          console.log('✅ 匹配到智能排版结果消息');
          // 智能排版结果，找到"智能排版"AI
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '智能排版';
          });
          if (!targetAI) {
            console.warn('⚠️ 智能排版AI不在enabledAIs中，动态添加');
            targetAI = {
              name: '智能排版',
              avatar: 'https://u3w.com/chatfile/Deepseek.png',
              capabilities: [],
              selectedCapabilities: [],
              enabled: true,
              status: 'running',
              progressLogs: [{
                content: '智能排版响应已接收',
                timestamp: new Date(),
                isCompleted: false
              }],
              isExpanded: true
            };
            this.enabledAIs.unshift(targetAI);
          }
          break;
        case 'RETURN_TY_RES':
          console.log('✅ 匹配到通义千问消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '通义千问';
          });
          break;
        case 'RETURN_METASO_RES':
          console.log('✅ 匹配到秘塔消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === "秘塔";
          });
          break;
        case 'RETURN_ZHZD_RES':
          console.log('✅ 匹配到知乎直答消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '知乎直答';
          });
          break;
        case 'RETURN_BAIDU_RES':
          console.log('✅ 匹配到百度AI消息');
          targetAI = this.enabledAIs.find(function (ai) {
            return ai.name === '百度AI';
          });
          break;
        default:
          console.log('⚠️ 未匹配到任何AI类型, 消息类型:', dataObj.type);
          return;
      }
      if (targetAI) {
        console.log("\u2705 \u627E\u5230\u76EE\u6807AI: ".concat(targetAI.name, ", \u5F53\u524D\u72B6\u6001: ").concat(targetAI.status));

        // 只处理当前任务的结果
        if (dataObj.taskId && dataObj.taskId !== this.userInfoReq.taskId) {
          console.log("\u26A0\uFE0F \u5FFD\u7565\u5176\u4ED6\u4EFB\u52A1\u7684\u6D88\u606F, \u5F53\u524DtaskId: ".concat(this.userInfoReq.taskId, ", \u6D88\u606FtaskId: ").concat(dataObj.taskId));
          return;
        }

        // 检查AI是否还在运行状态，避免重复处理
        if (targetAI.status !== 'running') {
          console.log("\u26A0\uFE0F AI\u72B6\u6001\u4E0D\u662Frunning\uFF0C\u8DF3\u8FC7\u5904\u7406, \u5F53\u524D\u72B6\u6001: ".concat(targetAI.status));
          return;
        }

        // 更新AI状态为已完成
        targetAI.status = 'completed';
        console.log("\uD83D\uDD04 \u66F4\u65B0".concat(targetAI.name, "\u72B6\u6001\u4E3A: completed"));

        // 将最后一条进度消息标记为已完成
        if (targetAI.progressLogs.length > 0) {
          targetAI.progressLogs[0].isCompleted = true;
          console.log("\uD83D\uDCDD \u6807\u8BB0".concat(targetAI.name, "\u6700\u540E\u4E00\u6761\u8FDB\u5EA6\u65E5\u5FD7\u4E3A\u5DF2\u5B8C\u6210"));
        }

        // 添加结果到数组开头
        var resultIndex = this.results.findIndex(function (r) {
          return r.aiName === targetAI.name && r.taskId === _this13.userInfoReq.taskId;
        });
        console.log("\uD83D\uDD0D \u68C0\u67E5results\u4E2D\u662F\u5426\u5DF2\u5B58\u5728".concat(targetAI.name, "\u7684\u7ED3\u679C, \u7D22\u5F15: ").concat(resultIndex));
        if (resultIndex === -1) {
          console.log("\u2795 \u6DFB\u52A0".concat(targetAI.name, "\u7684\u65B0\u7ED3\u679C\u5230results"));
          this.results.unshift({
            aiName: targetAI.name,
            content: dataObj.draftContent,
            shareUrl: dataObj.shareUrl || '',
            shareImgUrl: dataObj.shareImgUrl || '',
            timestamp: new Date(),
            taskId: this.userInfoReq.taskId
          });
          this.activeResultIndex = 0;
        } else {
          console.log("\uD83D\uDD04 \u66FF\u6362".concat(targetAI.name, "\u7684\u73B0\u6709\u7ED3\u679C"));
          this.results.splice(resultIndex, 1);
          this.results.unshift({
            aiName: targetAI.name,
            content: dataObj.draftContent,
            shareUrl: dataObj.shareUrl || '',
            shareImgUrl: dataObj.shareImgUrl || '',
            timestamp: new Date(),
            taskId: this.userInfoReq.taskId
          });
          this.activeResultIndex = 0;
        }
        console.log("\uD83D\uDCCA \u5F53\u524Dresults\u6570\u91CF: ".concat(this.results.length));
        console.log("\uD83D\uDCCA results\u5217\u8868:", this.results.map(function (r) {
          return r.aiName;
        }).join(', '));

        // 折叠所有区域当有结果返回时
        this.sectionExpanded.aiConfig = false;
        this.sectionExpanded.promptInput = false;
        this.sectionExpanded.taskStatus = false;
        console.log('📐 折叠所有配置区域');

        // 滚动到结果区域
        this.scrollIntoView = 'results';
        console.log('📜 设置滚动到结果区域');

        // 保存历史记录
        this.saveHistory();
        console.log('💾 保存历史记录');
        console.log("\u2705 ".concat(targetAI.name, "\u7ED3\u679C\u5904\u7406\u5B8C\u6210"));
      } else {
        console.error("\u274C \u672A\u627E\u5230\u5BF9\u5E94\u7684AI, \u6D88\u606F\u7C7B\u578B: ".concat(dataObj.type));
        console.error('❌ 可能的原因: 1) AI未启用 2) AI名称不匹配 3) enabledAIs为空');
      }
    },
    // 状态相关方法
    getStatusText: function getStatusText(status) {
      var statusMap = {
        'idle': '等待中',
        'running': '正在执行',
        'completed': '已完成',
        'failed': '执行失败'
      };
      return statusMap[status] || '未知状态';
    },
    getStatusIconClass: function getStatusIconClass(status) {
      var classMap = {
        'idle': 'status-idle',
        'running': 'status-running',
        'completed': 'status-completed',
        'failed': 'status-failed'
      };
      return classMap[status] || 'status-unknown';
    },
    getStatusEmoji: function getStatusEmoji(status) {
      var emojiMap = {
        'idle': '⏳',
        'running': '🔄',
        'completed': '✅',
        'failed': '❌'
      };
      return emojiMap[status] || '❓';
    },
    // 切换任务展开状态
    toggleTaskExpansion: function toggleTaskExpansion(ai) {
      ai.isExpanded = !ai.isExpanded;
    },
    // 切换自动播放
    toggleAutoPlay: function toggleAutoPlay(event) {
      this.autoPlay = event.detail.value;
    },
    // 预览图片
    previewImage: function previewImage(url) {
      uni.previewImage({
        current: url,
        urls: [url]
      });
    },
    // 结果相关方法
    switchResultTab: function switchResultTab(index) {
      this.activeResultIndex = index;
    },
    renderMarkdown: function renderMarkdown(text) {
      try {
        // 对于DeepSeek响应，添加特殊的CSS类
        if (this.currentResult && this.currentResult.aiName === 'DeepSeek') {
          // 检查是否已经包含了deepseek-response类
          if (text && text.includes('class="deepseek-response"')) {
            return text; // 已经包含了特殊类，直接返回
          }

          var renderedHtml = (0, _marked.marked)(text);
          return "<div class=\"deepseek-response\">".concat(renderedHtml, "</div>");
        }
        return (0, _marked.marked)(text);
      } catch (error) {
        return text;
      }
    },
    isImageFile: function isImageFile(url) {
      if (!url) return false;
      var imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp', '.svg'];
      var urlLower = url.toLowerCase();
      return imageExtensions.some(function (ext) {
        return urlLower.includes(ext);
      });
    },
    // 判断是否为PDF文件
    isPdfFile: function isPdfFile(url) {
      if (!url) return false;
      return url.toLowerCase().includes('.pdf');
    },
    copyResult: function copyResult(content) {
      uni.setClipboardData({
        data: content,
        success: function success() {
          uni.showToast({
            title: '已复制到剪贴板',
            icon: 'success'
          });
        }
      });
    },
    // shareResult(result) {
    // 	uni.share({
    // 		provider: 'weixin',
    // 		scene: 'WXSceneSession',
    // 		type: 0,
    // 		title: `${result.aiName}的执行结果`,
    // 		summary: result.content.substring(0, 100),
    // 		success: () => {
    // 			uni.showToast({
    // 				title: '分享成功',
    // 				icon: 'success'
    // 			});
    // 		}
    // 	});
    // },
    exportResult: function exportResult(result) {
      // 小程序环境下的导出功能可以通过分享或复制实现
      this.copyResult(result.content);
    },
    openShareUrl: function openShareUrl(url) {
      uni.setClipboardData({
        data: url,
        success: function success() {
          uni.showToast({
            title: '原链接已复制',
            icon: 'success'
          });
        },
        fail: function fail() {
          uni.showToast({
            title: '复制失败',
            icon: 'none'
          });
        }
      });
    },
    // 复制PDF链接
    copyPdfUrl: function copyPdfUrl(url) {
      uni.setClipboardData({
        data: url,
        success: function success() {
          uni.showToast({
            title: 'PDF链接已复制',
            icon: 'success'
          });
        },
        fail: function fail() {
          uni.showToast({
            title: '复制失败',
            icon: 'none'
          });
        }
      });
    },
    // 打开PDF文件
    openPdfFile: function openPdfFile(url) {
      uni.showLoading({
        title: '正在下载PDF...'
      });

      // 尝试下载并打开文件
      uni.downloadFile({
        url: url,
        success: function success(res) {
          uni.hideLoading();
          if (res.statusCode === 200) {
            // 打开文件
            uni.openDocument({
              filePath: res.tempFilePath,
              success: function success() {
                uni.showToast({
                  title: 'PDF已打开',
                  icon: 'success'
                });
              },
              fail: function fail() {
                // 如果无法打开，提示并复制链接
                uni.showModal({
                  title: '提示',
                  content: '无法在当前环境打开PDF文件，已复制链接到剪贴板，请在浏览器中打开',
                  showCancel: false,
                  success: function success() {
                    uni.setClipboardData({
                      data: url
                    });
                  }
                });
              }
            });
          } else {
            uni.showToast({
              title: '下载失败',
              icon: 'none'
            });
          }
        },
        fail: function fail() {
          uni.hideLoading();
          // 下载失败，提示并复制链接
          uni.showModal({
            title: '提示',
            content: '下载失败，已复制PDF链接到剪贴板，请在浏览器中打开',
            showCancel: false,
            success: function success() {
              uni.setClipboardData({
                data: url
              });
            }
          });
        }
      });
    },
    // 历史记录相关方法
    showHistoryDrawer: function showHistoryDrawer() {
      this.historyDrawerVisible = true;
      this.loadChatHistory(1);
    },
    closeHistoryDrawer: function closeHistoryDrawer() {
      this.historyDrawerVisible = false;
    },
    loadChatHistory: function loadChatHistory(isAll) {
      var _this14 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {
        var res;
        return _regenerator.default.wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                _context4.prev = 0;
                _context4.next = 3;
                return (0, _aigc.getChatHistory)(_this14.userId, isAll);
              case 3:
                res = _context4.sent;
                if (res.code === 200) {
                  _this14.chatHistory = res.data || [];
                }
                _context4.next = 11;
                break;
              case 7:
                _context4.prev = 7;
                _context4.t0 = _context4["catch"](0);
                console.error('加载历史记录失败:', _context4.t0);
                uni.showToast({
                  title: '加载历史记录失败',
                  icon: 'none'
                });
              case 11:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, null, [[0, 7]]);
      }))();
    },
    loadHistoryItem: function loadHistoryItem(item) {
      try {
        var historyData = JSON.parse(item.data);
        // 恢复AI选择配置
        this.aiList = historyData.aiList || this.aiList;
        // 恢复提示词输入
        this.promptInput = historyData.promptInput || item.userPrompt;
        // 恢复任务流程
        this.enabledAIs = historyData.enabledAIs || [];
        // 恢复主机可视化
        this.screenshots = historyData.screenshots || [];
        // 恢复执行结果
        this.results = historyData.results || [];
        // 恢复chatId
        this.chatId = item.chatId || this.chatId;
        this.userInfoReq.toneChatId = item.toneChatId || '';
        this.userInfoReq.ybDsChatId = item.ybDsChatId || '';
        this.userInfoReq.dbChatId = item.dbChatId || '';
        // this.userInfoReq.tyChatId = item.tyChatId || '';

        this.userInfoReq.metasoChatId = item.metasoChatId || "";
        this.userInfoReq.isNewChat = false;

        // 不再根据AI登录状态更新AI启用状态，保持原有选择

        // 展开相关区域
        this.sectionExpanded.aiConfig = true;
        this.sectionExpanded.promptInput = true;
        this.sectionExpanded.taskStatus = true;
        this.taskStarted = true;
        this.closeHistoryDrawer();
        uni.showToast({
          title: '历史记录加载成功',
          icon: 'success'
        });
      } catch (error) {
        console.error('加载历史记录失败:', error);
        uni.showToast({
          title: '加载失败',
          icon: 'none'
        });
      }
    },
    // 加载上次会话
    loadLastChat: function loadLastChat() {
      var _this15 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {
        var res, lastChat;
        return _regenerator.default.wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return (0, _aigc.getChatHistory)(_this15.userId, 0);
              case 3:
                res = _context5.sent;
                if (res.code === 200 && res.data && res.data.length > 0) {
                  // 获取最新的会话记录
                  lastChat = res.data[0];
                  _this15.loadHistoryItem(lastChat);
                }
                _context5.next = 10;
                break;
              case 7:
                _context5.prev = 7;
                _context5.t0 = _context5["catch"](0);
                console.error('加载上次会话失败:', _context5.t0);
              case 10:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, null, [[0, 7]]);
      }))();
    },
    saveHistory: function saveHistory() {
      var _this16 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6() {
        var historyData;
        return _regenerator.default.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                historyData = {
                  aiList: _this16.aiList,
                  promptInput: _this16.promptInput,
                  enabledAIs: _this16.enabledAIs,
                  screenshots: _this16.screenshots,
                  results: _this16.results,
                  chatId: _this16.chatId,
                  toneChatId: _this16.userInfoReq.toneChatId,
                  ybDsChatId: _this16.userInfoReq.ybDsChatId,
                  dbChatId: _this16.userInfoReq.dbChatId,
                  // tyChatId: this.userInfoReq.tyChatId,

                  metasoChatId: _this16.userInfoReq.metasoChatId,
                  baiduChatId: _this16.userInfoReq.baiduChatId,
                  zhzdChatId: _this16.userInfoReq.zhzdChatId
                };
                _context6.prev = 1;
                _context6.next = 4;
                return (0, _aigc.saveUserChatData)({
                  userId: _this16.userId,
                  userPrompt: _this16.promptInput,
                  data: JSON.stringify(historyData),
                  chatId: _this16.chatId,
                  toneChatId: _this16.userInfoReq.toneChatId,
                  ybDsChatId: _this16.userInfoReq.ybDsChatId,
                  dbChatId: _this16.userInfoReq.dbChatId,
                  // tyChatId: this.userInfoReq.tyChatId,

                  metasoChatId: _this16.userInfoReq.metasoChatId,
                  baiduChatId: _this16.userInfoReq.baiduChatId,
                  zhzdChatId: _this16.userInfoReq.zhzdChatId
                });
              case 4:
                _context6.next = 10;
                break;
              case 6:
                _context6.prev = 6;
                _context6.t0 = _context6["catch"](1);
                console.error('保存历史记录失败:', _context6.t0);
                uni.showToast({
                  title: '保存历史记录失败',
                  icon: 'none'
                });
              case 10:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, null, [[1, 6]]);
      }))();
    },
    getHistoryDate: function getHistoryDate(timestamp) {
      try {
        console.log('getHistoryDate 输入:', timestamp, (0, _typeof2.default)(timestamp));
        if (!timestamp) {
          return '未知日期';
        }
        var date;
        if (typeof timestamp === 'number') {
          date = new Date(timestamp);
        } else if (typeof timestamp === 'string') {
          // 处理 "2025-6-23 14:53:12" 这种格式
          var match = timestamp.match(/(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})/);
          if (match) {
            var _match = (0, _slicedToArray2.default)(match, 7),
              year = _match[1],
              month = _match[2],
              day = _match[3],
              hour = _match[4],
              minute = _match[5],
              second = _match[6];
            date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(hour), parseInt(minute), parseInt(second));
          } else {
            // 如果正则不匹配，尝试其他方式
            var fixedTimestamp = timestamp.replace(/\s/g, 'T');
            date = new Date(fixedTimestamp);
            if (isNaN(date.getTime())) {
              date = new Date(timestamp);
            }
          }
        } else {
          date = new Date(timestamp);
        }
        console.log('getHistoryDate 解析结果:', date, date.getTime());
        if (isNaN(date.getTime())) {
          return '未知日期';
        }
        var today = new Date();
        var yesterday = new Date(today);
        yesterday.setDate(yesterday.getDate() - 1);
        if (date.toDateString() === today.toDateString()) {
          return '今天';
        } else if (date.toDateString() === yesterday.toDateString()) {
          return '昨天';
        } else {
          return date.toLocaleDateString('zh-CN');
        }
      } catch (error) {
        console.error('格式化日期错误:', error, timestamp);
        return '未知日期';
      }
    },
    // 格式化历史记录时间
    formatHistoryTime: function formatHistoryTime(timestamp) {
      try {
        console.log('formatHistoryTime 输入:', timestamp, (0, _typeof2.default)(timestamp));
        var date;
        if (!timestamp) {
          return '时间未知';
        }

        // 如果是数字，直接创建Date对象
        if (typeof timestamp === 'number') {
          date = new Date(timestamp);
        } else if (typeof timestamp === 'string') {
          // 处理ISO 8601格式：2025-06-25T07:18:54.110Z
          if (timestamp.includes('T') && (timestamp.includes('Z') || timestamp.includes('+'))) {
            date = new Date(timestamp);
          }
          // 处理 "2025-6-26 08:46:26" 这种格式
          else {
            var match = timestamp.match(/(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})/);
            if (match) {
              var _match2 = (0, _slicedToArray2.default)(match, 7),
                year = _match2[1],
                month = _match2[2],
                day = _match2[3],
                _hour = _match2[4],
                _minute = _match2[5],
                second = _match2[6];
              // 注意：Date构造函数的month参数是0-11，所以要减1
              date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(_hour), parseInt(_minute), parseInt(second));
            } else {
              // 如果正则不匹配，尝试其他方式
              var fixedTimestamp = timestamp.replace(/\s/g, 'T');
              date = new Date(fixedTimestamp);
              if (isNaN(date.getTime())) {
                date = new Date(timestamp);
              }
            }
          }
        } else if (timestamp instanceof Date) {
          date = timestamp;
        } else {
          date = new Date(timestamp);
        }
        console.log('formatHistoryTime 解析结果:', date, date.getTime());
        if (isNaN(date.getTime())) {
          return '时间未知';
        }

        // 使用更简洁的时间格式，避免显示时区信息
        var hour = date.getHours().toString().padStart(2, '0');
        var minute = date.getMinutes().toString().padStart(2, '0');
        var timeString = "".concat(hour, ":").concat(minute);
        console.log('formatHistoryTime 输出:', timeString);
        return timeString;
      } catch (error) {
        console.error('格式化时间错误:', error, timestamp);
        return '时间未知';
      }
    },
    // 修改折叠切换方法
    toggleHistoryExpansion: function toggleHistoryExpansion(item) {
      this.expandedHistoryItems[item.chatId] = !this.expandedHistoryItems[item.chatId];
      this.$forceUpdate(); // 强制更新视图
    },
    // 智能评分相关方法
    showScoreModal: function showScoreModal() {
      var _this17 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7() {
        var _require, getAllScorePrompt, response;
        return _regenerator.default.wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                _this17.selectedResults = [];
                _this17.scoreModalVisible = true;

                // 加载评分提示词模板列表
                _context7.prev = 2;
                _require = __webpack_require__(/*! @/api/wechat/aigc.js */ 77), getAllScorePrompt = _require.getAllScorePrompt;
                _context7.next = 6;
                return getAllScorePrompt();
              case 6:
                response = _context7.sent;
                if (response.code === 200) {
                  _this17.scorePromptList = response.data || [];
                }
                _context7.next = 13;
                break;
              case 10:
                _context7.prev = 10;
                _context7.t0 = _context7["catch"](2);
                console.error('加载评分提示词模板失败:', _context7.t0);
                // 失败也不影响使用，用户可以手动输入
              case 13:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7, null, [[2, 10]]);
      }))();
    },
    closeScoreModal: function closeScoreModal() {
      this.scoreModalVisible = false;
    },
    // 获取当前选中的评分模板索引
    getScorePromptIndex: function getScorePromptIndex() {
      var _this18 = this;
      if (!this.selectedScorePrompt) return 0;
      var index = this.scorePromptList.findIndex(function (prompt) {
        return prompt.name === _this18.selectedScorePrompt;
      });
      return index === -1 ? 0 : index;
    },
    // 评分模板选择变化
    onScorePromptChange: function onScorePromptChange(event) {
      var index = event.detail.value;
      if (this.scorePromptList[index]) {
        this.selectedScorePrompt = this.scorePromptList[index].name;
        this.scorePrompt = this.scorePromptList[index].prompt;
      }
    },
    // 媒体投递相关方法
    showLayoutModal: function showLayoutModal() {
      if (!this.currentResult) {
        uni.showToast({
          title: '没有可投递的内容',
          icon: 'none'
        });
        return;
      }
      console.log("showLayoutModal", this.currentResult);
      // 深度拷贝当前结果，避免引用被修改
      this.currentLayoutResult = {
        aiName: this.currentResult.aiName,
        content: this.currentResult.content,
        shareUrl: this.currentResult.shareUrl,
        shareImgUrl: this.currentResult.shareImgUrl,
        timestamp: this.currentResult.timestamp
      };

      // 默认选择公众号
      this.selectedMedia = 'wechat_layout';
      // 设置layoutPrompt为当前结果内容（参考网页端逻辑）
      this.layoutPrompt = this.currentLayoutResult.content;
      this.layoutModalVisible = true;
    },
    // 选择排版AI
    selectLayoutAI: function selectLayoutAI(ai) {
      this.layoutAI = ai;
      console.log('选择排版AI:', ai);
    },
    // 选择媒体
    selectMedia: function selectMedia(media) {
      this.selectedMedia = media;
      console.log('选择媒体:', media);
    },
    closeLayoutModal: function closeLayoutModal() {
      this.layoutModalVisible = false;
    },
    handleLayout: function handleLayout() {
      if (!this.currentLayoutResult) return;
      this.closeLayoutModal();

      // 根据选择的媒体创建排版任务
      if (this.selectedMedia === 'wechat_layout') {
        this.createWechatLayoutTask();
      } else if (this.selectedMedia === 'zhihu_layout') {
        this.createZhihuLayoutTask();
      }
    },
    // 创建知乎排版任务
    createZhihuLayoutTask: function createZhihuLayoutTask() {
      var _this19 = this;
      // 构建知乎排版请求
      var layoutRequest = {
        jsonrpc: '2.0',
        id: this.generateUUID(),
        method: 'AI排版',
        params: {
          taskId: this.generateUUID(),
          userId: this.userId,
          corpId: this.corpId,
          userPrompt: this.currentLayoutResult.content,
          roles: '',
          selectedMedia: 'zhihu_layout'
        }
      };

      // 根据选择的AI设置roles参数
      var selectedAI = this.aiList.find(function (ai) {
        return ai.name === _this19.layoutAI;
      });
      if (selectedAI) {
        if (selectedAI.name === '豆包') {
          layoutRequest.params.roles = 'zj-db,';
          if (selectedAI.selectedCapabilities.includes('deep_thinking')) {
            layoutRequest.params.roles += 'zj-db-sdsk,';
          }
        } else if (selectedAI.name === 'DeepSeek') {
          layoutRequest.params.roles = 'deepseek,';
          if (selectedAI.selectedCapabilities.includes('deep_thinking')) {
            layoutRequest.params.roles += 'ds-sdsk,';
          }
          if (selectedAI.selectedCapabilities.includes('web_search')) {
            layoutRequest.params.roles += 'ds-lwss,';
          }
        }
      }

      // 发送排版请求
      console.log("知乎排版参数", layoutRequest);
      this.message(layoutRequest);

      // 创建智能排版AI节点
      var znpbAI = {
        name: '智能排版',
        avatar: selectedAI ? selectedAI.avatar : 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
        capabilities: [],
        selectedCapabilities: [],
        enabled: true,
        status: 'running',
        progressLogs: [{
          content: '知乎排版任务已提交，正在排版...',
          timestamp: new Date(),
          isCompleted: false,
          type: '智能排版'
        }],
        isExpanded: true
      };
      this.addOrUpdateTaskAI(znpbAI, '智能排版');
      uni.showToast({
        title: '知乎排版任务已提交',
        icon: 'success'
      });
    },
    // 创建百家号投递任务
    createBaijiahaoDeliveryTask: function createBaijiahaoDeliveryTask() {
      // 组合完整的提示词：数据库提示词 + 原文内容
      var fullPrompt = this.layoutPrompt + '\n\n' + this.currentLayoutResult.content;

      // 构建百家号投递请求
      var baijiahaoRequest = {
        jsonrpc: '2.0',
        id: this.generateUUID(),
        method: '投递到百家号',
        params: {
          taskId: this.generateUUID(),
          userId: this.userId,
          corpId: this.corpId,
          userPrompt: fullPrompt,
          aiName: this.currentLayoutResult.aiName,
          content: this.currentLayoutResult.content
        }
      };
      console.log("百家号投递参数", baijiahaoRequest);
      this.message(baijiahaoRequest);

      // 创建投递到百家号任务节点
      var baijiahaoAI = {
        name: '投递到百家号',
        avatar: 'https://my-image-hosting.oss-cn-beijing.aliyuncs.com/baojiahao.png',
        capabilities: [],
        selectedCapabilities: [],
        enabled: true,
        status: 'running',
        progressLogs: [{
          content: '投递到百家号任务已提交，正在处理...',
          timestamp: new Date(),
          isCompleted: false,
          type: '投递到百家号'
        }],
        isExpanded: true
      };
      this.addOrUpdateTaskAI(baijiahaoAI, '投递到百家号');
      uni.showToast({
        title: '百家号投递任务已提交',
        icon: 'success'
      });
    },
    // 创建微头条排版任务
    createToutiaoLayoutTask: function createToutiaoLayoutTask() {
      // 组合完整的提示词：数据库提示词 + 原文内容
      var fullPrompt = this.layoutPrompt + '\n\n' + this.currentLayoutResult.content;

      // 构建微头条排版请求
      var layoutRequest = {
        jsonrpc: '2.0',
        id: this.generateUUID(),
        method: '微头条排版',
        params: {
          taskId: this.generateUUID(),
          userId: this.userId,
          corpId: this.corpId,
          userPrompt: fullPrompt,
          roles: ''
        }
      };
      console.log("微头条排版参数", layoutRequest);
      this.message(layoutRequest);

      // 创建微头条排版AI节点
      var tthZnpbAI = {
        name: '微头条排版',
        avatar: 'https://u3w.com/chatfile/TouTiao.png',
        capabilities: [],
        selectedCapabilities: [],
        enabled: true,
        status: 'running',
        progressLogs: [{
          content: '微头条排版任务已提交，正在排版...',
          timestamp: new Date(),
          isCompleted: false,
          type: '微头条排版'
        }],
        isExpanded: true
      };
      this.addOrUpdateTaskAI(tthZnpbAI, '微头条排版');
      uni.showToast({
        title: '微头条排版任务已提交',
        icon: 'success'
      });
    },
    // 创建公众号排版任务（参考web端实现）
    createWechatLayoutTask: function createWechatLayoutTask() {
      var _this20 = this;
      // 构建智能排版请求
      var layoutRequest = {
        jsonrpc: '2.0',
        id: this.generateUUID(),
        method: 'AI排版',
        params: {
          taskId: this.generateUUID(),
          userId: this.userId,
          corpId: this.corpId,
          userPrompt: this.currentLayoutResult.content,
          roles: '',
          selectedMedia: 'wechat_layout'
        }
      };

      // 根据选择的AI设置roles（参考web端逻辑）
      var selectedAI = this.aiList.find(function (ai) {
        return ai.name === _this20.layoutAI;
      });
      if (selectedAI) {
        if (selectedAI.name === '豆包') {
          layoutRequest.params.roles = 'zj-db,';
          if (selectedAI.selectedCapabilities.includes('deep_thinking')) {
            layoutRequest.params.roles += 'zj-db-sdsk,';
          }
        } else if (selectedAI.name === 'DeepSeek') {
          layoutRequest.params.roles = 'deepseek,';
          if (selectedAI.selectedCapabilities.includes('deep_thinking')) {
            layoutRequest.params.roles += 'ds-sdsk,';
          }
          if (selectedAI.selectedCapabilities.includes('web_search')) {
            layoutRequest.params.roles += 'ds-lwss,';
          }
        }
      }

      // 发送排版请求
      console.log("公众号排版参数", layoutRequest);
      this.message(layoutRequest);

      // 创建智能排版AI节点
      var znpbAI = {
        name: '智能排版',
        avatar: selectedAI ? selectedAI.avatar : 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
        capabilities: [],
        selectedCapabilities: [],
        enabled: true,
        status: 'running',
        progressLogs: [{
          content: '公众号排版任务已提交，正在排版...',
          timestamp: new Date(),
          isCompleted: false,
          type: '智能排版'
        }],
        isExpanded: true
      };
      this.addOrUpdateTaskAI(znpbAI, '智能排版');
      uni.showToast({
        title: '公众号排版请求已发送，请等待结果',
        icon: 'success'
      });
    },
    // 添加或更新任务AI
    addOrUpdateTaskAI: function addOrUpdateTaskAI(aiNode, taskName) {
      var existIndex = this.enabledAIs.findIndex(function (ai) {
        return ai.name === taskName;
      });
      if (existIndex === -1) {
        // 如果不存在，添加到数组开头
        this.enabledAIs.unshift(aiNode);
      } else {
        // 如果已存在，先移除旧的，再将新的添加到开头
        this.enabledAIs.splice(existIndex, 1);
        this.enabledAIs.unshift(aiNode);
      }
      this.$forceUpdate();
    },
    // 直接投递已排版的内容到公众号
    handleDirectPushToWechat: function handleDirectPushToWechat(result) {
      var _this21 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8() {
        var mediaLabel, mediaItem, mediaName, params, res, mediaRequest, mediaDeliveryAI;
        return _regenerator.default.wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                _context8.prev = 0;
                console.log("handleDirectPushToWechat 开始执行", result);

                // 验证内容是否为空
                if (!(!result.content || result.content.trim() === '')) {
                  _context8.next = 5;
                  break;
                }
                uni.showToast({
                  title: '投递内容为空，请先进行AI排版生成内容',
                  icon: 'none'
                });
                return _context8.abrupt("return");
              case 5:
                // 提取媒体类型：从 aiName 中去掉 "智能排版" 四个字
                mediaLabel = result.aiName.substring(4); // 去掉"智能排版"
                mediaItem = _this21.mediaList.find(function (media) {
                  return media.label === mediaLabel;
                });
                mediaName = mediaItem ? mediaItem.name : '';
                console.log("提取的媒体类型:", mediaLabel, mediaName);

                // 根据媒体类型进行不同的处理
                if (!mediaName.includes('wechat')) {
                  _context8.next = 21;
                  break;
                }
                // 公众号投递：直接调用API
                uni.showLoading({
                  title: '正在投递到公众号...'
                });
                _this21.collectNum++;
                params = {
                  contentText: result.content,
                  userId: _this21.userId,
                  shareUrl: result.shareUrl || '',
                  aiName: result.aiName || '',
                  num: _this21.collectNum
                };
                console.log("公众号投递参数", params);
                _context8.next = 16;
                return (0, _aigc.pushAutoOffice)(params);
              case 16:
                res = _context8.sent;
                uni.hideLoading();
                if (res.code === 200) {
                  uni.showToast({
                    title: '投递到公众号成功',
                    icon: 'success'
                  });
                } else {
                  uni.showToast({
                    title: res.message || '投递失败',
                    icon: 'none'
                  });
                }
                _context8.next = 22;
                break;
              case 21:
                if (mediaName.includes('zhihu')) {
                  // 知乎投递：通过WebSocket发送投递请求
                  uni.showLoading({
                    title: '正在投递到知乎...'
                  });
                  mediaRequest = {
                    jsonrpc: "2.0",
                    id: _this21.generateUUID(),
                    method: "媒体投递",
                    params: {
                      taskId: _this21.generateUUID(),
                      userId: _this21.userId,
                      corpId: _this21.corpId,
                      aiName: result.aiName,
                      userPrompt: result.content,
                      selectedMedia: "zhihu_layout"
                    }
                  };
                  console.log("知乎投递参数", mediaRequest);
                  _this21.message(mediaRequest);

                  // 创建媒体投递任务节点
                  mediaDeliveryAI = {
                    name: '媒体投递',
                    avatar: 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
                    capabilities: [],
                    selectedCapabilities: [],
                    enabled: true,
                    status: 'running',
                    progressLogs: [{
                      content: '知乎投递任务已提交，正在投递...',
                      timestamp: new Date(),
                      isCompleted: false,
                      type: '媒体投递'
                    }],
                    isExpanded: true
                  }; // 添加或更新媒体投递任务
                  _this21.addOrUpdateTaskAI(mediaDeliveryAI, '媒体投递');
                  uni.hideLoading();
                  uni.showToast({
                    title: '媒体投递请求已发送，请等待结果',
                    icon: 'success'
                  });
                } else {
                  uni.showToast({
                    title: '不支持的媒体类型',
                    icon: 'none'
                  });
                }
              case 22:
                _context8.next = 29;
                break;
              case 24:
                _context8.prev = 24;
                _context8.t0 = _context8["catch"](0);
                uni.hideLoading();
                console.error('投递失败:', _context8.t0);
                uni.showToast({
                  title: '投递失败',
                  icon: 'none'
                });
              case 29:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee8, null, [[0, 24]]);
      }))();
    },
    // 推送到公众号
    handlePushToWechat: function handlePushToWechat(contentText) {
      var _this22 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9() {
        var params, res;
        return _regenerator.default.wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                _context9.prev = 0;
                console.log("handlePushToWechat 开始执行", _this22.currentLayoutResult);
                if (_this22.currentLayoutResult) {
                  _context9.next = 6;
                  break;
                }
                console.error("currentLayoutResult 为空，无法投递");
                uni.showToast({
                  title: '投递失败：缺少原始结果信息',
                  icon: 'none'
                });
                return _context9.abrupt("return");
              case 6:
                uni.showLoading({
                  title: '正在投递...'
                });

                // 自增计数器
                _this22.collectNum++;
                params = {
                  contentText: contentText,
                  userId: _this22.userId,
                  shareUrl: _this22.currentLayoutResult.shareUrl || '',
                  aiName: _this22.currentLayoutResult.aiName || '',
                  num: _this22.collectNum
                };
                console.log("投递参数", params);
                _context9.next = 12;
                return (0, _aigc.pushAutoOffice)(params);
              case 12:
                res = _context9.sent;
                uni.hideLoading();
                if (res.code === 200) {
                  uni.showToast({
                    title: '投递成功',
                    icon: 'success'
                  });
                } else {
                  uni.showToast({
                    title: res.message || '投递失败',
                    icon: 'none'
                  });
                }
                _context9.next = 22;
                break;
              case 17:
                _context9.prev = 17;
                _context9.t0 = _context9["catch"](0);
                uni.hideLoading();
                console.error('投递到公众号失败:', _context9.t0);
                uni.showToast({
                  title: '投递失败',
                  icon: 'none'
                });
              case 22:
              case "end":
                return _context9.stop();
            }
          }
        }, _callee9, null, [[0, 17]]);
      }))();
    },
    toggleResultSelection: function toggleResultSelection(event) {
      var values = event.detail.value;
      console.log('toggleResultSelection - 选中的values:', values);
      console.log('toggleResultSelection - 当前scorePrompt:', this.scorePrompt.trim());
      this.selectedResults = values;
      console.log('toggleResultSelection - 更新后的selectedResults:', this.selectedResults);
      console.log('toggleResultSelection - canScore状态:', this.canScore);
    },
    handleScore: function handleScore() {
      var _this23 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10() {
        var _require2, _getScoreWord, response, scoreSuffix, selectedContents, fullPrompt, scoreRequest, selectedAI, wkpfAI;
        return _regenerator.default.wrap(function _callee10$(_context10) {
          while (1) {
            switch (_context10.prev = _context10.next) {
              case 0:
                if (_this23.canScore) {
                  _context10.next = 2;
                  break;
                }
                return _context10.abrupt("return");
              case 2:
                _context10.prev = 2;
                // 调用getScoreWord API获取评分后缀
                _require2 = __webpack_require__(/*! @/api/wechat/aigc.js */ 77), _getScoreWord = _require2.getScoreWord;
                _context10.next = 6;
                return _getScoreWord();
              case 6:
                response = _context10.sent;
                scoreSuffix = response.code === 200 ? response.data : '初稿：'; // 获取选中的结果内容并按照指定格式拼接
                selectedContents = _this23.results.filter(function (result) {
                  return _this23.selectedResults.includes(result.aiName);
                }).map(function (result) {
                  // 将HTML内容转换为纯文本（小程序版本简化处理）
                  var plainContent = result.content.replace(/<[^>]*>/g, '');
                  return "".concat(result.aiName).concat(scoreSuffix).concat(plainContent, "\n");
                }).join('\n'); // 构建完整的评分提示内容
                fullPrompt = "".concat(_this23.scorePrompt, "\n").concat(selectedContents); // 构建评分请求
                scoreRequest = {
                  jsonrpc: '2.0',
                  id: _this23.generateUUID(),
                  method: 'AI评分',
                  params: {
                    taskId: _this23.generateUUID(),
                    userId: _this23.userId,
                    corpId: _this23.corpId,
                    userPrompt: fullPrompt,
                    roles: ''
                  }
                }; // 根据选择的AI设置roles参数
                selectedAI = _this23.aiList.find(function (ai) {
                  return ai.name === _this23.scoreAI;
                });
                if (selectedAI) {
                  if (selectedAI.name === '豆包') {
                    scoreRequest.params.roles = 'zj-db,';
                    if (selectedAI.selectedCapabilities.includes('deep_thinking')) {
                      scoreRequest.params.roles += 'zj-db-sdsk,';
                    }
                  } else if (selectedAI.name === 'DeepSeek') {
                    scoreRequest.params.roles = 'deepseek,';
                    if (selectedAI.selectedCapabilities.includes('deep_thinking')) {
                      scoreRequest.params.roles += 'ds-sdsk,';
                    }
                    if (selectedAI.selectedCapabilities.includes('web_search')) {
                      scoreRequest.params.roles += 'ds-lwss,';
                    }
                  }
                }

                // 发送评分请求
                console.log("评分参数", scoreRequest);
                _this23.message(scoreRequest);
                _this23.closeScoreModal();

                // 创建智能评分AI节点
                wkpfAI = {
                  name: '智能评分',
                  avatar: selectedAI ? selectedAI.avatar : 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
                  capabilities: [],
                  selectedCapabilities: [],
                  enabled: true,
                  status: 'running',
                  progressLogs: [{
                    content: '智能评分任务已提交，正在评分...',
                    timestamp: new Date(),
                    isCompleted: false,
                    type: '智能评分'
                  }],
                  isExpanded: true
                }; // 添加或更新智能评分任务
                _this23.addOrUpdateTaskAI(wkpfAI, '智能评分');
                uni.showToast({
                  title: '评分请求已发送，请等待结果',
                  icon: 'success'
                });
                _context10.next = 25;
                break;
              case 21:
                _context10.prev = 21;
                _context10.t0 = _context10["catch"](2);
                console.error('智能评分失败:', _context10.t0);
                uni.showToast({
                  title: '评分请求失败',
                  icon: 'none'
                });
              case 25:
              case "end":
                return _context10.stop();
            }
          }
        }, _callee10, null, [[2, 21]]);
      }))();
    },
    // 选择评分AI
    selectScoreAI: function selectScoreAI(ai) {
      this.scoreAI = ai;
      console.log('选择评分AI:', ai);
    },
    // 创建新对话
    createNewChat: function createNewChat() {
      // 重置所有数据
      this.chatId = this.generateUUID();
      this.promptInput = '';
      this.taskStarted = false;
      this.screenshots = [];
      this.results = [];
      this.enabledAIs = [];
      this.userInfoReq = {
        userPrompt: '',
        userId: this.userId,
        corpId: this.corpId,
        taskId: '',
        roles: '',
        toneChatId: '',
        ybDsChatId: '',
        dbChatId: '',
        tyChatId: '',
        metasoChatId: '',
        baiduChatId: '',
        zhzdChatId: '',
        isNewChat: true
      };
      // 重置AI列表为初始状态
      this.aiList = [{
        name: 'DeepSeek',
        avatar: 'https://u3w.com/chatfile/Deepseek.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }, {
          label: '联网搜索',
          value: 'web_search'
        }],
        selectedCapabilities: ['deep_thinking', 'web_search'],
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: false // 添加单选标记
      }, {
        name: '豆包',
        avatar: 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }],
        selectedCapabilities: ['deep_thinking'],
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: false // 添加单选标记
      }, {
        name: '通义千问',
        avatar: 'https://u3w.com/chatfile/TongYi.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }, {
          label: '联网搜索',
          value: 'web_search'
        }],
        selectedCapability: '',
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true
      }, {
        name: '秘塔',
        avatar: 'https://www.aitool6.com/wp-content/uploads/2023/06/9557d1-2.jpg',
        capabilities: [{
          label: '极速',
          value: 'fast'
        }, {
          label: '极速思考',
          value: 'fast_thinking'
        }, {
          label: '长思考',
          value: 'long_thinking'
        }],
        selectedCapabilities: "fast",
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: true // 添加单选标记
      }, {
        name: "知乎直答",
        avatar: 'https://u3w.com/chatfile/ZHZD.png',
        capabilities: [{
          label: "智能思考",
          value: "smart_thinking"
        }, {
          label: "深度思考",
          value: "deep_thinking"
        }, {
          label: "快速回答",
          value: "fast_answer"
        }],
        selectedCapability: "smart_thinking",
        // 改为单选，默认智能思考
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: true // 设为单选模式
      }, {
        name: "百度AI",
        avatar: 'https://u3w.com/chatfile/baiduAI.png',
        capabilities: [{
          label: "深度搜索",
          value: "web_search"
        }],
        selectedCapabilities: [],
        enabled: true,
        status: "idle",
        progressLogs: [],
        isExpanded: true
      }, {
        name: '腾讯元宝',
        avatar: 'https://u3w.com/chatfile/yuanbao.png',
        capabilities: [{
          label: '深度思考',
          value: 'deep_thinking'
        }, {
          label: '联网搜索',
          value: 'web_search'
        }],
        selectedCapabilities: ['deep_thinking', 'web_search'],
        selectedModel: 'hunyuan',
        // 默认选择混元
        models: [{
          label: '混元',
          value: 'hunyuan'
        }, {
          label: 'DeepSeek',
          value: 'deepseek'
        }],
        enabled: true,
        status: 'idle',
        progressLogs: [],
        isExpanded: true,
        isSingleSelect: false
      }];
      // 不再根据AI登录状态更新AI启用状态，保持原有选择

      // 展开相关区域
      this.sectionExpanded.aiConfig = true;
      this.sectionExpanded.promptInput = true;
      this.sectionExpanded.taskStatus = true;
      uni.showToast({
        title: '已创建新对话',
        icon: 'success'
      });
    },
    // AI状态相关方法
    checkAiLoginStatus: function checkAiLoginStatus() {
      var _this24 = this;
      // 延迟检查，确保WebSocket连接已建立
      setTimeout(function () {
        _this24.sendAiStatusCheck();
        // 不再更新AI启用状态，保持原有选择
      }, 2000);
    },
    sendAiStatusCheck: function sendAiStatusCheck() {
      // 检查腾讯元宝登录状态
      this.sendWebSocketMessage({
        type: 'PLAY_CHECK_YB_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });

      // 检查豆包登录状态
      this.sendWebSocketMessage({
        type: 'PLAY_CHECK_DB_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });

      // 检查DeepSeek登录状态
      this.sendWebSocketMessage({
        type: 'PLAY_CHECK_DEEPSEEK_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });

      // 检查通义千问登录状态
      this.sendWebSocketMessage({
        type: 'PLAY_CHECK_QW_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });

      // 检查秘塔登录状态
      this.sendWebSocketMessage({
        type: "PLAY_CHECK_METASO_LOGIN",
        userId: this.userId,
        corpId: this.corpId
      });

      // 检查百度AI登录状态
      this.sendWebSocketMessage({
        type: 'PLAY_CHECK_BAIDU_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });

      // 检查知乎直答登录状态
      console.log('发送知乎直答登录检验请求:', {
        type: 'PLAY_CHECK_ZHZD_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });
      this.sendWebSocketMessage({
        type: 'PLAY_CHECK_ZHZD_LOGIN',
        userId: this.userId,
        corpId: this.corpId
      });
    },
    getPlatformIcon: function getPlatformIcon(type) {
      var icons = {
        yuanbao: 'https://u3w.com/chatfile/yuanbao.png',
        doubao: 'https://u3w.com/chatfile/%E8%B1%86%E5%8C%85.png',
        agent: 'https://u3w.com/chatfile/yuanbao.png',
        tongyi: 'https://u3w.com/chatfile/TongYi.png'
      };
      return icons[type] || '';
    },
    getPlatformName: function getPlatformName(type) {
      var names = {
        yuanbao: '腾讯元宝',
        doubao: '豆包',
        agent: '智能体'
        // tongyi: '通义千问',
      };

      return names[type] || '';
    },
    refreshAiStatus: function refreshAiStatus() {
      var _this25 = this;
      return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11() {
        var result;
        return _regenerator.default.wrap(function _callee11$(_context11) {
          while (1) {
            switch (_context11.prev = _context11.next) {
              case 0:
                if (!_this25.isRefreshing) {
                  _context11.next = 3;
                  break;
                }
                console.log('正在刷新中，跳过重复操作');
                return _context11.abrupt("return");
              case 3:
                _this25.isRefreshing = true;
                _context11.prev = 4;
                _context11.prev = 5;
                _context11.next = 8;
                return (0, _corpId.ensureLatestCorpId)();
              case 8:
                result = _context11.sent;
                console.log('刷新按钮：主机ID已更新为最新值:', result.corpId);
                if (result.corpId !== _this25.corpId) {
                  console.log('检测到主机ID变更，从', _this25.corpId, '更新为', result.corpId);
                  _this25.corpId = result.corpId;
                  _this25.userInfoReq.corpId = result.corpId;
                  // 更新本地存储，确保一致性
                  _storage.default.set(_constant.default.corpId, result.corpId);
                  console.log('本地主机ID存储已同步:', result.corpId);
                } else {
                  console.log('主机ID无变化，当前值:', _this25.corpId);
                }
                _context11.next = 16;
                break;
              case 13:
                _context11.prev = 13;
                _context11.t0 = _context11["catch"](5);
                console.error('确保企业ID最新失败:', _context11.t0);
              case 16:
                // 重置所有AI状态为加载中
                _this25.isLoading = {
                  yuanbao: true,
                  doubao: true,
                  deepseek: true,
                  tongyi: true,
                  metaso: true,
                  baidu: true,
                  zhzd: true
                };

                // 重置登录状态
                _this25.aiLoginStatus = {
                  yuanbao: false,
                  doubao: false,
                  deepseek: false,
                  tongyi: false,
                  metaso: false,
                  baidu: false,
                  zhzd: false
                };

                // 重置账户信息
                _this25.accounts = {
                  yuanbao: '',
                  doubao: '',
                  deepseek: '',
                  tongyi: '',
                  metaso: '',
                  baidu: '',
                  zhzd: ''
                };

                // 显示刷新提示
                uni.showToast({
                  title: '正在刷新连接状态...',
                  icon: 'loading',
                  duration: 1500
                });

                // 重新建立WebSocket连接，使用最新的主机ID
                console.log('准备重新建立WebSocket连接，使用主机ID:', _this25.corpId);
                _this25.closeWebSocket();
                setTimeout(function () {
                  console.log('开始初始化WebSocket，主机ID:', _this25.corpId);
                  _this25.initWebSocket();
                  // 延迟检查AI状态，确保WebSocket重新连接
                  setTimeout(function () {
                    console.log('发送AI状态检查，主机ID:', _this25.corpId);
                    _this25.sendAiStatusCheck();
                    // 重置刷新标志
                    _this25.isRefreshing = false;
                  }, 2000);
                }, 500);
                _context11.next = 30;
                break;
              case 25:
                _context11.prev = 25;
                _context11.t1 = _context11["catch"](4);
                console.error('刷新AI状态时发生错误:', _context11.t1);
                _this25.isRefreshing = false;
                uni.showToast({
                  title: '刷新失败，请重试',
                  icon: 'none'
                });
              case 30:
              case "end":
                return _context11.stop();
            }
          }
        }, _callee11, null, [[4, 25], [5, 13]]);
      }))();
    },
    // 判断AI是否已登录可用
    isAiLoginEnabled: function isAiLoginEnabled(ai) {
      switch (ai.name) {
        case '腾讯元宝':
          return this.aiLoginStatus.yuanbao;
        // 腾讯元宝登录状态
        case '豆包':
          return this.aiLoginStatus.doubao;
        // 豆包登录状态
        case 'DeepSeek':
          return this.aiLoginStatus.deepseek;
        // 使用实际的DeepSeek登录状态
        case '通义千问':
          return this.aiLoginStatus.tongyi;
        // 通义登录状态
        case "秘塔":
          return this.aiLoginStatus.metaso;
        // 秘塔登录状态
        case "知乎直答":
          return this.aiLoginStatus.zhzd;
        // 知乎直答登录状态
        case "百度AI":
          return this.aiLoginStatus.baidu;
        // 百度AI登录状态

        default:
          return false;
      }
    },
    // 判断AI是否在加载状态
    isAiInLoading: function isAiInLoading(ai) {
      switch (ai.name) {
        case '腾讯元宝':
          return this.isLoading.yuanbao;
        case '豆包':
          return this.isLoading.doubao;
        case 'DeepSeek':
          return this.isLoading.deepseek;
        // 使用实际的DeepSeek加载状态
        case '通义千问':
          return this.isLoading.tongyi;
        case "秘塔":
          return this.isLoading.metaso;
        case "知乎直答":
          return this.isLoading.zhzd;
        case "百度AI":
          return this.isLoading.baidu;
        default:
          return false;
      }
    },
    // 根据登录状态禁用相关AI（已废弃，不再修改enabled状态）
    disableAIsByLoginStatus: function disableAIsByLoginStatus(loginType) {
      // 不再修改enabled状态，只通过UI控制操作权限
      console.log("AI ".concat(loginType, " \u767B\u5F55\u72B6\u6001\u5DF2\u66F4\u65B0\uFF0C\u4F46\u4FDD\u6301\u539F\u6709\u9009\u62E9"));
    },
    // 根据当前AI登录状态更新AI启用状态（已废弃，不再修改enabled状态）
    updateAiEnabledStatus: function updateAiEnabledStatus() {
      // 不再修改enabled状态，只通过UI控制操作权限
      console.log('AI登录状态已更新，但保持原有选择');
    },
    // 微头条相关方法
    // 微头条文章编辑相关方法
    showTthArticleEditModal: function showTthArticleEditModal() {
      this.tthArticleEditVisible = true;
    },
    closeTthArticleEditModal: function closeTthArticleEditModal() {
      this.tthArticleEditVisible = false;
    },
    confirmTTHPublish: function confirmTTHPublish() {
      if (!this.tthArticleTitle || !this.tthArticleContent) {
        uni.showToast({
          title: '请填写标题和内容',
          icon: 'none'
        });
        return;
      }
      var publishRequest = {
        jsonrpc: '2.0',
        id: this.generateUUID(),
        method: '微头条发布',
        params: {
          taskId: this.generateUUID(),
          userId: this.userId,
          corpId: this.corpId,
          roles: '',
          title: this.tthArticleTitle,
          content: this.tthArticleContent,
          type: '微头条发布'
        }
      };
      this.message(publishRequest);
      this.tthArticleEditVisible = false;
      this.tthFlowVisible = true;
      this.tthFlowLogs = [];
      this.tthFlowImages = [];
      uni.showToast({
        title: '微头条发布请求已发送！',
        icon: 'success'
      });
    },
    // 微头条发布流程相关方法
    closeTthFlowDialog: function closeTthFlowDialog() {
      this.tthFlowVisible = false;
      this.tthFlowLogs = [];
      this.tthFlowImages = [];
    },
    // HTML转纯文本方法
    htmlToText: function htmlToText(html) {
      if (!html) return '';
      return html.replace(/<[^>]*>/g, '');
    },
    // 格式化时间
    formatTime: function formatTime(timestamp) {
      try {
        if (!timestamp) {
          return '时间未知';
        }
        var date;
        if (typeof timestamp === 'number') {
          date = new Date(timestamp);
        } else if (typeof timestamp === 'string') {
          // 处理ISO 8601格式：2025-06-25T07:18:54.110Z
          if (timestamp.includes('T') && (timestamp.includes('Z') || timestamp.includes('+'))) {
            date = new Date(timestamp);
          }
          // 处理 "2025-6-23 14:53:12" 这种格式
          else {
            var match = timestamp.match(/(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{1,2}):(\d{1,2})/);
            if (match) {
              var _match3 = (0, _slicedToArray2.default)(match, 7),
                year = _match3[1],
                month = _match3[2],
                day = _match3[3],
                _hour2 = _match3[4],
                _minute2 = _match3[5],
                _second = _match3[6];
              date = new Date(parseInt(year), parseInt(month) - 1, parseInt(day), parseInt(_hour2), parseInt(_minute2), parseInt(_second));
            } else {
              // 如果正则不匹配，尝试其他方式
              var fixedTimestamp = timestamp.replace(/\s/g, 'T');
              date = new Date(fixedTimestamp);
              if (isNaN(date.getTime())) {
                date = new Date(timestamp);
              }
            }
          }
        } else if (timestamp instanceof Date) {
          date = timestamp;
        } else {
          date = new Date(timestamp);
        }
        if (isNaN(date.getTime())) {
          return '时间未知';
        }

        // 使用更简洁的时间格式，避免显示时区信息
        var hour = date.getHours().toString().padStart(2, '0');
        var minute = date.getMinutes().toString().padStart(2, '0');
        var second = date.getSeconds().toString().padStart(2, '0');
        var timeString = "".concat(hour, ":").concat(minute, ":").concat(second);
        return timeString;
      } catch (error) {
        console.error('格式化时间错误:', error, timestamp);
        return '时间未知';
      }
    }
  }
};
exports.default = _default;
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/wx.js */ 1)["default"], __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 2)["default"]))

/***/ }),

/***/ 84:
/*!*******************************************************************************************************************!*\
  !*** D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue?vue&type=style&index=0&id=51b5538d&scoped=true&lang=css& ***!
  \*******************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--6-oneOf-1-3!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../小红帽/HBuilderX.4.76.2025082103/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=51b5538d&scoped=true&lang=css& */ 85);
/* harmony import */ var _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_HBuilderX_4_76_2025082103_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_index_vue_vue_type_style_index_0_id_51b5538d_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 85:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/AAAi/U3W-AI-main/cube-mini/pages/work/index.vue?vue&type=style&index=0&id=51b5538d&scoped=true&lang=css& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
    if(false) { var cssReload; }
  

/***/ })

},[[66,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/work/index.js.map